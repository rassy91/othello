!function(){const t=function(t){this.ctx=t,this.cautionText=document.getElementById("caution"),this.stoneColorText=document.getElementById("stoneColor"),this.GRID_SIZE=50,this.LINE_NUMBER=9,this.R=.3*this.GRID_SIZE,this.isWhite=1,this.board=[],this.turnStones=[],this.init()};t.prototype={init:function(){const t=this;t.ctx.translate(1,1),t.drawBoard();for(let e=1;e<t.LINE_NUMBER;e++){let e=[];for(let i=1;i<t.LINE_NUMBER;i++)e.push({});t.board.push(e)}},drawBoard:function(){const t=this,e=t.GRID_SIZE*(t.LINE_NUMBER-1);let i=0,n=0;t.drawRect(i,n,e,e,"#008833");for(let o=1;o<=t.LINE_NUMBER;o++)t.drawLine(i,0,i,e),i+=t.GRID_SIZE;for(let o=1;o<=t.LINE_NUMBER;o++)t.drawLine(0,n,e,n),n+=t.GRID_SIZE},drawRect:function(t,e,i,n,o){this.ctx.fillStyle=void 0!==o?o:"#000000",this.ctx.fillRect(t,e,i,n)},drawLine:function(t,e,i,n,o,s){this.ctx.strokeStyle=void 0!==o?o:"#000000",this.ctx.lineWidth=void 0!==s?s:1,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.closePath(),this.ctx.stroke()},startGame:function(){const t=this,e=t.GRID_SIZE*((t.LINE_NUMBER-1)/2),i=t.GRID_SIZE/2;let n,o,s=-1,h=-1,l=1;function r(){for(let r=0;r<2;r++){let r={r:t.R};n=e+s*i,o=e+h*i,r.x=n,r.y=o,r.isWhite=l;let c=new window.myOthello.Stone(t.ctx,r);c.drawArc(r);let a=t.board[Math.floor(o/t.GRID_SIZE)][Math.floor(n/t.GRID_SIZE)];a.instance=c,a.isWhite=l,s*=-1,h*=-1}}r(),s*=-1,l*=-1,r()},showCaution:function(){const t=this;t.cautionText.classList.contains("isVisible")||(t.cautionText.classList.add("isVisible"),setTimeout(function(){t.cautionText.classList.remove("isVisible")},1e3))},putStone:function(t,e){const i=this;let n=Math.floor(t/i.GRID_SIZE),o=Math.floor(e/i.GRID_SIZE);if(!i.checkVacancy(n,o))return void i.showCaution();if(!i.checkNeighbor(n,o))return void i.showCaution();if(!i.checkIfPossible(n,o))return void i.showCaution();i.isWhite*=-1;let s={x:i.GRID_SIZE*n+i.GRID_SIZE/2,y:i.GRID_SIZE*o+i.GRID_SIZE/2,r:i.R,isWhite:i.isWhite},h=new window.myOthello.Stone(i.ctx,s);h.drawArc(s);let l=i.board[o][n];l.instance=h,l.isWhite=i.isWhite,l.x=n,l.y=o,i.turnStones.length>0&&(i.turnStones.forEach(function(t){t.isWhite*=-1,t.instance.reverse()}),i.turnStones.length=0),i.stoneColorText.classList.contains("js-isWhite")?(i.stoneColorText.textContent="黒",i.stoneColorText.classList.remove("js-isWhite")):(i.stoneColorText.textContent="白",i.stoneColorText.classList.add("js-isWhite"))},checkVacancy:function(t,e){return Object.keys(this.board[e][t]).length<=0},checkNeighbor:function(t,e){const i=this;let n,o,s=[[t,e-1],[t+1,e-1],[t+1,e],[t+1,e+1],[t,e+1],[t-1,e+1],[t-1,e],[t-1,e-1]];for(let h=0,l=s.length;h<l;h++)if(n=s[h][0],o=s[h][1],!(n<0||n>7||o<0||o>7)&&Object.keys(i.board[o][n]).length>0)return!0},checkIfPossible:function(t,e){const i=this,n=i.LINE_NUMBER-1-1;let o,s=!1,h=null,l=null,r=[];return o=!1,function(){for(let c=1;c<=n&&!(e-c<0);c++)if(h=i.board[e-c][t],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t]).y=e-n,l.x=t,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7);c++)if(h=i.board[e+c][t],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t]).y=e+n,l.x=t,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(t-c<0);c++)if(h=i.board[e][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e][t-n]).y=e,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(t+c>7);c++)if(h=i.board[e][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e][t+n]).y=e,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e-c<0||t-c<0);c++)if(h=i.board[e-c][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t-n]).y=e-n,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7||t+c>7);c++)if(h=i.board[e+c][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t+n]).y=e+n,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7||t-c<0);c++)if(h=i.board[e+c][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t-n]).y=e+n,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e-c<0||t+c>7);c++)if(h=i.board[e-c][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t+n]).y=e-n,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),s}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.BoardManager=t}(),function(){const t=function(t,e){this.canvas=t,this.color=e.color,this.stones=[],this.init()};t.prototype={init:function(){this.setEvent()},setEvent:function(){},getClickPos:function(){}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Player=t}(),function(){const t=function(t,e){this.ctx=t,this.data=e,this.isWhite=e.isWhite};t.prototype={drawArc:function(t){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0),this.ctx.fillStyle=this.isWhite>0?"#ffffff":"#000000",this.ctx.fill(),this.ctx.closePath()},reverse:function(){this.isWhite*=-1,this.drawArc(this.data)}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Stone=t}(),document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("canvas");if(!t.getContext)return;const e=t.getContext("2d"),i=document.getElementById("canvasWrapper");e.canvas.width=i.clientWidth,e.canvas.height=i.clientHeight;const n=new myOthello.BoardManager(e);n.startGame(),t.addEventListener("click",function(t){n.putStone(t.offsetX,t.offsetY)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJvYXJkTWFuYWdlci5qcyIsIlBsYXllci5qcyIsIlN0b25lLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIkJvYXJkTWFuYWdlciIsImN0eCIsInRoaXMiLCJjYXV0aW9uVGV4dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdG9uZUNvbG9yVGV4dCIsIkdSSURfU0laRSIsIkxJTkVfTlVNQkVSIiwiUiIsImlzV2hpdGUiLCJib2FyZCIsInR1cm5TdG9uZXMiLCJpbml0IiwicHJvdG90eXBlIiwic2VsZiIsInRyYW5zbGF0ZSIsImRyYXdCb2FyZCIsImkiLCJyb3ciLCJqIiwicHVzaCIsImZpZWxkU2l6ZSIsIngiLCJ5IiwiZHJhd1JlY3QiLCJkcmF3TGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiY29sb3IiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJzdGFydEdhbWUiLCJjZW50ZXIiLCJkaWZmIiwicG9zWCIsInBvc1kiLCJkaXIxIiwiZGlyMiIsInNldEZpcnN0U3RvbmUiLCJkYXRhIiwiciIsInN0b25lIiwid2luZG93IiwibXlPdGhlbGxvIiwiU3RvbmUiLCJkcmF3QXJjIiwib2JqIiwiTWF0aCIsImZsb29yIiwiaW5zdGFuY2UiLCJzaG93Q2F1dGlvbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwic2V0VGltZW91dCIsInJlbW92ZSIsInB1dFN0b25lIiwiY2xpY2tlZFgiLCJjbGlja2VkWSIsIm50aEdyaWRYIiwibnRoR3JpZFkiLCJjaGVja1ZhY2FuY3kiLCJjaGVja05laWdoYm9yIiwiY2hlY2tJZlBvc3NpYmxlIiwibGVuZ3RoIiwiZm9yRWFjaCIsInZhbCIsInJldmVyc2UiLCJ0ZXh0Q29udGVudCIsIm50aFgiLCJudGhZIiwiT2JqZWN0Iiwia2V5cyIsImxpbmUiLCJuZWlnaGJvcnMiLCJsZW4iLCJNQVhfQ09VTlQiLCJpc1RtcFBvc3NpYmxlIiwiaXNQb3NzaWJsZSIsInRtcE9iaiIsInRtcFR1cm5TdG9uZXMiLCJjaGVja1RvcCIsImNoZWNrQm90dG9tIiwiY2hlY2tMZWZ0IiwiY2hlY2tSaWdodCIsImNoZWNrTGVmdFRvcCIsImNoZWNrUmlnaHRCb3R0b20iLCJjaGVja0xlZnRCb3R0b20iLCJjaGVja1JpZ2h0VG9wIiwiUGxheWVyIiwiY2FudmFzIiwic3RvbmVzIiwic2V0RXZlbnQiLCJnZXRDbGlja1BvcyIsImFyYyIsIlBJIiwiZmlsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRDb250ZXh0Iiwid3JhcHBlciIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZSIsIm9mZnNldFgiLCJvZmZzZXRZIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQVFBLE1BQUFBLEVBQUEsU0FBQUMsR0FDQUMsS0FFQUQsSUFBQUEsRUFGQUMsS0FLQUMsWUFBQUMsU0FBQUMsZUFBQSxXQUxBSCxLQU1BSSxlQUFBRixTQUFBQyxlQUFBLGNBTkFILEtBU0FLLFVBQUEsR0FUQUwsS0FVQU0sWUFBQSxFQVZBTixLQVlBTyxFQUFBLEdBWkFQLEtBWUFLLFVBWkFMLEtBZ0JBUSxRQUFBLEVBaEJBUixLQW1CQVMsU0FuQkFULEtBc0JBVSxjQXRCQVYsS0F3QkFXLFFBR0FiLEVBQUFjLFdBS0FELEtBQUEsV0FDQSxNQUFBRSxFQUFBYixLQUdBYSxFQUFBZCxJQUFBZSxVQUFBLEVBQUEsR0FHQUQsRUFBQUUsWUFHQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUgsRUFBQVAsWUFBQVUsSUFBQSxDQUNBLElBQUFDLEtBRUEsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFMLEVBQUFQLFlBQUFZLElBQ0FELEVBQUFFLFNBR0FOLEVBQUFKLE1BQUFVLEtBQUFGLEtBUUFGLFVBQUEsV0FDQSxNQUFBRixFQUFBYixLQUVBb0IsRUFBQVAsRUFBQVIsV0FBQVEsRUFBQVAsWUFB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RyxPQUFBbkUsTUFBQTRFLEVBQUFDLFlBQ0E5RyxFQUFBb0csT0FBQVcsT0FBQUYsRUFBQUcsYUFFQSxNQUFBdEcsRUFBQSxJQUFBMkMsVUFBQXRELGFBQUFDLEdBR0FVLEVBQUErQixZQUdBMkQsRUFBQU8saUJBQUEsUUFBQSxTQUFBTSxHQUVBdkcsRUFBQXdELFNBQUErQyxFQUFBQyxRQUFBRCxFQUFBRSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICog44Kz44Oz44K544OI44Op44Kv44K/XG4gICAgICog44Oc44O844OJ44Gu54q25oWL44KS566h55CG44GZ44KLXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGN0eFxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0IEJvYXJkTWFuYWdlciA9IGZ1bmN0aW9uKGN0eCkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmN0eCA9IGN0eDtcblxuICAgICAgICAvLyBET01cbiAgICAgICAgc2VsZi5jYXV0aW9uVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXV0aW9uJyk7XG4gICAgICAgIHNlbGYuc3RvbmVDb2xvclRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvbmVDb2xvcicpO1xuXG4gICAgICAgIC8v5YCkXG4gICAgICAgIHNlbGYuR1JJRF9TSVpFID0gNTA7XG4gICAgICAgIHNlbGYuTElORV9OVU1CRVIgPSA5O1xuICAgICAgICAvLyDnn7Pjga7ljYrlvoRcbiAgICAgICAgc2VsZi5SID0gc2VsZi5HUklEX1NJWkUgKiAwLjM7XG5cbiAgICAgICAgLy8g55m96buS5Yik5a6a44OV44Op44KwXG4gICAgICAgIC8vIDHjgafnmb3jgIEtMeOBp+m7klxuICAgICAgICBzZWxmLmlzV2hpdGUgPSAxO1xuXG4gICAgICAgIC8vIOOBneOCjOOBnuOCjOOBruODnuOCueebruOBruaDheWgseOCkuagvOe0jVxuICAgICAgICBzZWxmLmJvYXJkID0gW107XG5cbiAgICAgICAgLy8g44Gy44Gj44GP44KK6L+U44GZ55+z44KS5LiA5pmC55qE44Gr5qC857SN44GZ44KLXG4gICAgICAgIHNlbGYudHVyblN0b25lcyA9IFtdO1xuXG4gICAgICAgIHNlbGYuaW5pdCgpO1xuICAgIH07XG5cbiAgICBCb2FyZE1hbmFnZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDliJ3mnJ/ljJZcbiAgICAgICAgICovXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIHg9MCwgeT0w44Gn5YWI44Gu5aSq44GV44GM5Y2K5YiG44GX5o+P5YaZ44GV44KM44Gq44GE44Gf44KB44CB5Z+65rqW54K544KS44Ga44KJ44GZXG4gICAgICAgICAgICBzZWxmLmN0eC50cmFuc2xhdGUoMSwgMSk7XG5cbiAgICAgICAgICAgIC8vIOODnOODvOODieOCkuaPj+WGmVxuICAgICAgICAgICAgc2VsZi5kcmF3Qm9hcmQoKTtcblxuICAgICAgICAgICAgLy8g5ZCE44Oe44K555uu44Gr5oOF5aCx5L+d5oyB55So44Gu44Kq44OW44K444Kn44Kv44OI44KS44KC44Gf44Gb44Gm44Oc44O844OJ5oOF5aCx44Gu6YWN5YiX44Gr5qC857SNXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNlbGYuTElORV9OVU1CRVI7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCByb3cgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgc2VsZi5MSU5FX05VTUJFUjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5wdXNoKHt9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZWxmLmJvYXJkLnB1c2gocm93KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDjg5zjg7zjg4njgpLmj4/lhplcbiAgICAgICAgICovXG4gICAgICAgIGRyYXdCb2FyZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgY29uc3QgZmllbGRTaXplID0gc2VsZi5HUklEX1NJWkUgKiAoc2VsZi5MSU5FX05VTUJFUiAtIDEpO1xuXG4gICAgICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgICAgICBsZXQgeSA9IDA7XG5cbiAgICAgICAgICAgIHNlbGYuZHJhd1JlY3QoeCwgeSwgZmllbGRTaXplLCBmaWVsZFNpemUsICcjMDA4ODMzJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlbGYuTElORV9OVU1CRVI7IGkrKykge1xuICAgICAgICAgICAgICAgIHNlbGYuZHJhd0xpbmUoeCwgMCwgeCwgZmllbGRTaXplKTtcbiAgICAgICAgICAgICAgICB4ICs9IHNlbGYuR1JJRF9TSVpFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc2VsZi5MSU5FX05VTUJFUjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5kcmF3TGluZSgwLCB5LCBmaWVsZFNpemUsIHkpO1xuICAgICAgICAgICAgICAgIHkgKz0gc2VsZi5HUklEX1NJWkU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog5Zub6KeS5b2i44KS5o+P5YaZXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geTFcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHgyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAgICAgICAgICovXG4gICAgICAgIGRyYXdSZWN0OiBmdW5jdGlvbih4MSwgeTEsIHgyLCB5MiwgY29sb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5maWxsU3R5bGUgPSB0eXBlb2YgY29sb3IgIT09ICd1bmRlZmluZWQnID8gY29sb3IgOiAnIzAwMDAwMCc7XG4gICAgICAgICAgICBzZWxmLmN0eC5maWxsUmVjdCh4MSwgeTEsIHgyLCB5Mik7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog57ea44KS5o+P5YaZXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geTFcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHgyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICAgICAqL1xuICAgICAgICBkcmF3TGluZTogZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIGNvbG9yLCB3aWR0aCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHNlbGYuY3R4LnN0cm9rZVN0eWxlID0gdHlwZW9mIGNvbG9yICE9PSAndW5kZWZpbmVkJyA/IGNvbG9yIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgc2VsZi5jdHgubGluZVdpZHRoID0gdHlwZW9mIHdpZHRoICE9PSAndW5kZWZpbmVkJyA/IHdpZHRoIDogMTtcblxuICAgICAgICAgICAgc2VsZi5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBzZWxmLmN0eC5tb3ZlVG8oeDEsIHkxKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmxpbmVUbyh4MiwgeTIpO1xuICAgICAgICAgICAgc2VsZi5jdHguY2xvc2VQYXRoKCk7XG5cbiAgICAgICAgICAgIHNlbGYuY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOOCsuODvOODoOOCueOCv+ODvOODiOaZguOBq+Wun+ihjFxuICAgICAgICAgKi9cbiAgICAgICAgc3RhcnRHYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBzZWxmLkdSSURfU0laRSAqICgoc2VsZi5MSU5FX05VTUJFUiAtIDEpIC8gMik7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gKHNlbGYuR1JJRF9TSVpFIC8gMik7XG4gICAgICAgICAgICBsZXQgZGlyMSA9IC0xO1xuICAgICAgICAgICAgbGV0IGRpcjIgPSAtMTtcbiAgICAgICAgICAgIGxldCBwb3NYLCBwb3NZO1xuICAgICAgICAgICAgbGV0IGlzV2hpdGUgPSAxO1xuXG4gICAgICAgICAgICBzZXRGaXJzdFN0b25lKCk7XG4gICAgICAgICAgICBkaXIxICo9IC0xO1xuICAgICAgICAgICAgaXNXaGl0ZSAqPSAtMTtcbiAgICAgICAgICAgIHNldEZpcnN0U3RvbmUoKTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiDliJ3mnJ/kvY3nva7jgavnn7PjgpLjgrvjg4Pjg4hcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gc2V0Rmlyc3RTdG9uZSgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8g6Ieq5YiG55So44Oh44Oi77ya6Zai5pWw44Gu5aSW5YG044Gn5a6a576p44GX44Gm44GK44KK44CB44Kq44OW44K444Kn44Kv44OI44Gu5Y+C54Wn5rih44GX44Gn5byV44Gj44GL44GL44Gj44GfXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcjogc2VsZi5SXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9IGNlbnRlciArIGRpcjEgKiBkaWZmO1xuICAgICAgICAgICAgICAgICAgICBwb3NZID0gY2VudGVyICsgZGlyMiAqIGRpZmY7XG5cbiAgICAgICAgICAgICAgICAgICAgZGF0YS54ID0gcG9zWDtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS55ID0gcG9zWTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pc1doaXRlID0gaXNXaGl0ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLkvZzmiJBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0b25lID0gbmV3IHdpbmRvdy5teU90aGVsbG8uU3RvbmUoc2VsZi5jdHgsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvLyDnn7PjgpLmj4/lhplcbiAgICAgICAgICAgICAgICAgICAgc3RvbmUuZHJhd0FyYyhkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDjg5zjg7zjg4njga7phY3liJfjga7oqbLlvZPkvY3nva7jgavjgqTjg7Pjgrnjgr/jg7Pjgrnjgajnj77lnKjjga7nmb3pu5LnirbmhYvjgpLmoLzntI1cbiAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IHNlbGYuYm9hcmRbTWF0aC5mbG9vcihwb3NZIC8gc2VsZi5HUklEX1NJWkUpXVtNYXRoLmZsb29yKHBvc1ggLyBzZWxmLkdSSURfU0laRSldO1xuICAgICAgICAgICAgICAgICAgICBvYmouaW5zdGFuY2UgPSBzdG9uZTtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmlzV2hpdGUgPSBpc1doaXRlO1xuXG4gICAgICAgICAgICAgICAgICAgIGRpcjEgKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGRpcjIgKj0gLTE7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOefs+OCkue9ruOBkeOBquOBhOS9jee9ruOBruWgtOWQiOOAgeazqOaEj+abuOOBjeOCkuihqOekuuOBmeOCi1xuICAgICAgICAgKi9cbiAgICAgICAgc2hvd0NhdXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICghc2VsZi5jYXV0aW9uVGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzVmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jYXV0aW9uVGV4dC5jbGFzc0xpc3QuYWRkKCdpc1Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdXRpb25UZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzVmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOefs+OCkue9ruOBj+WHpueQhlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gY2xpY2tlZFggOiBjYW52YXPkuIrjga7jgq/jg6rjg4Pjgq/kvY3nva5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNsaWNrZWRZIDogY2FudmFz5LiK44Gu44Kv44Oq44OD44Kv5L2N572uXG4gICAgICAgICAqL1xuICAgICAgICBwdXRTdG9uZTogZnVuY3Rpb24oY2xpY2tlZFgsIGNsaWNrZWRZKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy8g5L2V55Wq55uu44Gu44Oe44K544GLXG4gICAgICAgICAgICBsZXQgbnRoR3JpZFggPSBNYXRoLmZsb29yKGNsaWNrZWRYIC8gc2VsZi5HUklEX1NJWkUpO1xuICAgICAgICAgICAgbGV0IG50aEdyaWRZID0gTWF0aC5mbG9vcihjbGlja2VkWSAvIHNlbGYuR1JJRF9TSVpFKTtcblxuICAgICAgICAgICAgLy8g55+z44GM572u44GR44KL44GL44Gu5Yik5a6aXG4gICAgICAgICAgICBpZiAoIXNlbGYuY2hlY2tWYWNhbmN5KG50aEdyaWRYLCBudGhHcmlkWSkpIHtcbiAgICAgICAgICAgICAgICAvLyDjgq/jg6rjg4Pjgq/jgZfjgZ/jg57jgrnjgYznqbrjgYvjganjgYbjgYtcblxuICAgICAgICAgICAgICAgIC8vIOefs+OCkue9ruOBkeOBquOBhOS9jee9ruOBruWgtOWQiOOAgeazqOaEj+abuOOBjeOCkuihqOekuuOBmeOCi1xuICAgICAgICAgICAgICAgIHNlbGYuc2hvd0NhdXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNlbGYuY2hlY2tOZWlnaGJvcihudGhHcmlkWCwgbnRoR3JpZFkpKSB7XG4gICAgICAgICAgICAgICAgLy8g44Kv44Oq44OD44Kv44GX44Gf44Oe44K544GM55+z44Gr44Go44Gq44KK5ZCI44Gj44Gm44GE44KL44GL44Gp44GG44GLXG5cbiAgICAgICAgICAgICAgICAvLyDnn7PjgpLnva7jgZHjgarjgYTkvY3nva7jga7loLTlkIjjgIHms6jmhI/mm7jjgY3jgpLooajnpLrjgZnjgotcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dDYXV0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzZWxmLmNoZWNrSWZQb3NzaWJsZShudGhHcmlkWCwgbnRoR3JpZFkpKSB7XG4gICAgICAgICAgICAgICAgLy8g44Kv44Oq44OD44Kv44GX44Gf44Oe44K544GM55+z44KS44Gy44Gj44GP44KK6L+U44Gb44KL44Oe44K544GL44Gp44GG44GLXG5cbiAgICAgICAgICAgICAgICAvLyDnn7PjgpLnva7jgZHjgarjgYTkvY3nva7jga7loLTlkIjjgIHms6jmhI/mm7jjgY3jgpLooajnpLrjgZnjgotcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dDYXV0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOefs+OCkue9ruOBkeOBn+WgtOWQiOOAgeiJsuOCkuWPjei7olxuICAgICAgICAgICAgc2VsZi5pc1doaXRlICo9IC0xO1xuXG4gICAgICAgICAgICAvLyDjgqTjg7Pjgrnjgr/jg7PjgrnjgavmuKHjgZnmg4XloLFcbiAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIHg6IChzZWxmLkdSSURfU0laRSAqIG50aEdyaWRYKSArIChzZWxmLkdSSURfU0laRSAvIDIpLFxuICAgICAgICAgICAgICAgIHk6IChzZWxmLkdSSURfU0laRSAqIG50aEdyaWRZKSArIChzZWxmLkdSSURfU0laRSAvIDIpLFxuICAgICAgICAgICAgICAgIHI6IHNlbGYuUixcbiAgICAgICAgICAgICAgICBpc1doaXRlOiBzZWxmLmlzV2hpdGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIOOCpOODs+OCueOCv+ODs+OCueOCkuS9nOaIkFxuICAgICAgICAgICAgbGV0IHN0b25lID0gbmV3IHdpbmRvdy5teU90aGVsbG8uU3RvbmUoc2VsZi5jdHgsIGRhdGEpO1xuICAgICAgICAgICAgc3RvbmUuZHJhd0FyYyhkYXRhKTtcblxuICAgICAgICAgICAgLy8g5Y+v6Kqt5oCn44Gu44Gf44KB44CB44GE44Gj44Gf44KT5aSJ5pWw44Gr6Kmy5b2T44Kq44OW44K444Kn44Kv44OI44KS5qC857SNXG4gICAgICAgICAgICBsZXQgb2JqID0gc2VsZi5ib2FyZFtudGhHcmlkWV1bbnRoR3JpZFhdO1xuICAgICAgICAgICAgb2JqLmluc3RhbmNlID0gc3RvbmU7XG4gICAgICAgICAgICBvYmouaXNXaGl0ZSA9IHNlbGYuaXNXaGl0ZTtcbiAgICAgICAgICAgIG9iai54ID0gbnRoR3JpZFg7XG4gICAgICAgICAgICBvYmoueSA9IG50aEdyaWRZO1xuXG4gICAgICAgICAgICAvLyDjgbLjgaPjgY/jgorov5TjgZnnn7PjgYzjgYLjgovloLTlkIjjga/jgbLjgaPjgY/jgorov5TjgZlcbiAgICAgICAgICAgIGlmIChzZWxmLnR1cm5TdG9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWwuaXNXaGl0ZSAqPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgdmFsLmluc3RhbmNlLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDjganjgaHjgonjga7nlarjgYvjga7ooajnpLrjgpLliIfjgormm7/jgYhcbiAgICAgICAgICAgIGlmICghc2VsZi5zdG9uZUNvbG9yVGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlzV2hpdGUnKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuc3RvbmVDb2xvclRleHQudGV4dENvbnRlbnQgPSAn55m9JztcbiAgICAgICAgICAgICAgICBzZWxmLnN0b25lQ29sb3JUZXh0LmNsYXNzTGlzdC5hZGQoJ2pzLWlzV2hpdGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zdG9uZUNvbG9yVGV4dC50ZXh0Q29udGVudCA9ICfpu5InO1xuICAgICAgICAgICAgICAgIHNlbGYuc3RvbmVDb2xvclRleHQuY2xhc3NMaXN0LnJlbW92ZSgnanMtaXNXaGl0ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOOCr+ODquODg+OCr+OBl+OBn+ODnuOCueOBjOepuuOBi+OBqeOBhuOBi+OCkuWIpOWumlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnRoWCA6IOS9leeVquebruOBruODnuOCueOBi++8iDEtOO+8iVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnRoWSA6IOS9leeVquebruOBruODnuOCueOBi++8iDEtOO+8iVxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGNoZWNrVmFjYW5jeTogZnVuY3Rpb24obnRoWCwgbnRoWSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhzZWxmLmJvYXJkW250aFldW250aFhdKS5sZW5ndGggPD0gMDtcblxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDjgq/jg6rjg4Pjgq/jgZfjgZ/jg57jgrnjgYznn7PjgavjgajjgarjgorlkIjjgaPjgabjgYTjgovjgYvjganjgYbjgYvjgpLliKTlrppcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFggOiDkvZXnlarnm67jga7jg57jgrnjgYvvvIgxLTjvvIlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFkgOiDkvZXnlarnm67jga7jg57jgrnjgYvvvIgxLTjvvIlcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBjaGVja05laWdoYm9yOiBmdW5jdGlvbihudGhYLCBudGhZKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgbGV0IHJvdywgbGluZTtcblxuICAgICAgICAgICAgbGV0IG5laWdoYm9ycyA9IFtcbiAgICAgICAgICAgICAgICBbbnRoWCwgbnRoWSAtIDFdLCAgICAgICAvLyDkuIpcbiAgICAgICAgICAgICAgICBbbnRoWCArIDEsIG50aFkgLSAxXSwgICAvLyDlj7PkuIpcbiAgICAgICAgICAgICAgICBbbnRoWCArIDEsIG50aFldLCAgICAgICAvLyDlj7NcbiAgICAgICAgICAgICAgICBbbnRoWCArIDEsIG50aFkgKyAxXSwgICAvLyDlj7PkuItcbiAgICAgICAgICAgICAgICBbbnRoWCwgbnRoWSArIDFdLCAgICAgICAvLyDkuItcbiAgICAgICAgICAgICAgICBbbnRoWCAtIDEsIG50aFkgKyAxXSwgICAvLyDlt6bkuItcbiAgICAgICAgICAgICAgICBbbnRoWCAtIDEsIG50aFldLCAgICAgICAvLyDlt6ZcbiAgICAgICAgICAgICAgICBbbnRoWCAtIDEsIG50aFkgLSAxXSAgICAvLyDlt6bkuIpcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBuZWlnaGJvcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHJvdyA9IG5laWdoYm9yc1tpXVswXTtcbiAgICAgICAgICAgICAgICBsaW5lID0gbmVpZ2hib3JzW2ldWzFdO1xuXG4gICAgICAgICAgICAgICAgLy8g44Oc44O844OJ44GL44KJ44Gv44G/5Ye644GZ44Go44GN44Gv44K544Kt44OD44OXXG4gICAgICAgICAgICAgICAgaWYgKHJvdyA8IDAgfHwgcm93ID4gNyB8fCBsaW5lIDwgMCB8fCBsaW5lID4gNykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2VsZi5ib2FyZFtsaW5lXVtyb3ddKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDjgq/jg6rjg4Pjgq/jgZfjgZ/jg57jgrnjgYznn7PjgpLjgbLjgaPjgY/jgorov5TjgZvjgovjg57jgrnjgYvjganjgYbjgYvjgpLliKTlrppcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFhcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFlcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBjaGVja0lmUG9zc2libGU6IGZ1bmN0aW9uKG50aFgsIG50aFkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBUT0RPIOiHquWIhueUqOODoeODou+8muOAgOS4ieinkumWouaVsOOCkuS9v+OBhuOBqOS7peS4i+WIpOWumuOBl+OChOOBmeOBneOBhuOBoOOBjCBNYXRoLmNvcyhNYXRoLlBJIC8gMinjgacx44Gr44Gq44KJ44Gq44GEXG4gICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGkgKyAnIC8gNCcpO1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKE1hdGguY29zKE1hdGguUEkgLyA0ICogaSksIE1hdGguc2luKE1hdGguUEkgLyA0ICogaSkpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICBjb25zdCBNQVhfQ09VTlQgPSAoc2VsZi5MSU5FX05VTUJFUiAtIDEpIC0gMTsgLy8gKCjnt5rjga7mlbAtMSkgLSDoh6rouqvjgYznva7jgYvjgozjgovjg57jgrkpXG4gICAgICAgICAgICBsZXQgaXNQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGlzVG1wUG9zc2libGU7XG4gICAgICAgICAgICBsZXQgb2JqID0gbnVsbDtcbiAgICAgICAgICAgIGxldCB0bXBPYmogPSBudWxsO1xuICAgICAgICAgICAgbGV0IHRtcFR1cm5TdG9uZXMgPSBbXTtcblxuICAgICAgICAgICAgLy8g572u44GR44KL5p2h5Lu2XG4gICAgICAgICAgICAvLyDlt6blj7PjgIHkuIrkuIvjgIHmlpzjgoE0NeW6puS4iuOBq+WQjOOBmOiJsuOBruefs+OBjOOBguOCi1xuICAgICAgICAgICAgLy8g44GL44GkIOOBneOBruWQjOOBmOiJsuOBruefs+OBqOiHqui6q+OBrumWk+OBq+mamemWk+OBquOBj+WIpeOBruiJsuOBruefs+OBjOOBguOCi1xuXG4gICAgICAgICAgICAvLyDkuIrjgIHlj7PkuIrjgIHlj7PjgIHlj7PkuIvjgIHkuIvjgIHlt6bkuIvjgIHlt6bjgIHlt6bkuIrjgIHjgafjgZ3jgozjgZ7jgozjg4Hjgqfjg4Pjgq/jgZnjgotcbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrVG9wKCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrQm90dG9tKCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrTGVmdCgpO1xuXG4gICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBjaGVja1JpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrTGVmdFRvcCgpO1xuXG4gICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBjaGVja1JpZ2h0Qm90dG9tKCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrTGVmdEJvdHRvbSgpO1xuXG4gICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBjaGVja1JpZ2h0VG9wKCk7XG5cbiAgICAgICAgICAgIHJldHVybiBpc1Bvc3NpYmxlO1xuXG4gICAgICAgICAgICAvLyDkuIrjgpLjg4Hjgqfjg4Pjgq9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrVG9wKCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWSAtIGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgLSBpXVtudGhYXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmogPSBzZWxmLmJvYXJkW250aFkgLSBqXVtudGhYXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFkgLSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai54ID0gbnRoWDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0JvdHRvbSgpIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IE1BWF9DT1VOVDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG50aFkgKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgKyBpXVtudGhYXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBpOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSArIGpdW250aFhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSArIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRtcE9iaikubGVuZ3RoID4gMCAmJiB0bXBPYmouaXNXaGl0ZSA9PT0gc2VsZi5pc1doaXRlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMucHVzaCh0bXBPYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RtcFBvc3NpYmxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gdG1wVHVyblN0b25lcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMucHVzaCh0bXBUdXJuU3RvbmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9zc2libGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8g5bem44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnQoKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhYIC0gaSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6Ieq6Lqr44GL44KJ6Kmy5b2T5pa55ZCR44Gu5Lit44Gn5LiA55Wq6L+R44GE55+zXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHNlbGYuYm9hcmRbbnRoWV1bbnRoWCAtIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWV1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueCA9IG50aFggLSBqO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRtcE9iaikubGVuZ3RoID4gMCAmJiB0bXBPYmouaXNXaGl0ZSA9PT0gc2VsZi5pc1doaXRlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMucHVzaCh0bXBPYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RtcFBvc3NpYmxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gdG1wVHVyblN0b25lcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMucHVzaCh0bXBUdXJuU3RvbmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5Y+z44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0KCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWCArIGkgPiA3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFldW250aFggKyBpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmogPSBzZWxmLmJvYXJkW250aFldW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYICsgajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5bem5LiK44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnRUb3AoKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhZIC0gaSA8IDAgfHwgbnRoWCAtIGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgLSBpXVtudGhYIC0gaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApICYmIChvYmouaXNXaGl0ZSAqIC0xID09PSBzZWxmLmlzV2hpdGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqID0gc2VsZi5ib2FyZFtudGhZIC0gal1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSAtIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYIC0gajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Y+z5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0Qm90dG9tKCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWSArIGkgPiA3IHx8IG50aFggKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgYvjgonoqbLlvZPmlrnlkJHjga7kuK3jgafkuIDnlarov5HjgYTnn7NcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5ib2FyZFtudGhZICsgaV1bbnRoWCArIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSArIGpdW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFkgKyBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai54ID0gbnRoWCArIGo7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModG1wT2JqKS5sZW5ndGggPiAwICYmIHRtcE9iai5pc1doaXRlID09PSBzZWxmLmlzV2hpdGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5wdXNoKHRtcE9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVG1wUG9zc2libGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSB0bXBUdXJuU3RvbmVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5wdXNoKHRtcFR1cm5TdG9uZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5bem5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnRCb3R0b20oKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhZICsgaSA+IDcgfHwgbnRoWCAtIGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgKyBpXVtudGhYIC0gaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApICYmIChvYmouaXNXaGl0ZSAqIC0xID09PSBzZWxmLmlzV2hpdGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqID0gc2VsZi5ib2FyZFtudGhZICsgal1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSArIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYIC0gajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Y+z5LiK44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0VG9wKCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWSAtIGkgPCAwIHx8IG50aFggKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgYvjgonoqbLlvZPmlrnlkJHjga7kuK3jgafkuIDnlarov5HjgYTnn7NcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5ib2FyZFtudGhZIC0gaV1bbnRoWCArIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSAtIGpdW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFkgLSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai54ID0gbnRoWCArIGo7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModG1wT2JqKS5sZW5ndGggPiAwICYmIHRtcE9iai5pc1doaXRlID09PSBzZWxmLmlzV2hpdGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5wdXNoKHRtcE9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVG1wUG9zc2libGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSB0bXBUdXJuU3RvbmVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5wdXNoKHRtcFR1cm5TdG9uZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uQm9hcmRNYW5hZ2VyID0gQm9hcmRNYW5hZ2VyO1xuXG59KCkpOyIsIjsoZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBQbGF5ZXIgPSBmdW5jdGlvbihjYW52YXMsIGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5jYW52YXMgPSBjYW52YXM7XG5cbiAgICAgICAgc2VsZi5jb2xvciA9IGRhdGEuY29sb3I7XG4gICAgICAgIHNlbGYuc3RvbmVzID0gW107XG5cbiAgICAgICAgc2VsZi5pbml0KCk7XG4gICAgfTtcblxuICAgIFBsYXllci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgc2VsZi5zZXRFdmVudCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBzZWxmLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlLm9mZnNldFgpO1xuICAgICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBnZXRDbGlja1BvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdy5teU90aGVsbG8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdpbmRvdy5teU90aGVsbG8gPSB7fTtcbiAgICB9XG4gICAgd2luZG93Lm15T3RoZWxsby5QbGF5ZXIgPSBQbGF5ZXI7XG5cbn0oKSk7IiwiOyhmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIOOBneOCjOOBnuOCjOOBruefs+OBruaDheWgsVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjdHhcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSA6IOS9jee9ruOBqOiJsuOCkuS/neaMgVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0IFN0b25lID0gZnVuY3Rpb24oY3R4LCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuY3R4ID0gY3R4O1xuICAgICAgICBzZWxmLmRhdGEgPSBkYXRhO1xuICAgICAgICBzZWxmLmlzV2hpdGUgPSBkYXRhLmlzV2hpdGU7XG5cbiAgICB9O1xuXG4gICAgU3RvbmUucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDnn7PjgpLmj4/lhplcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIGRyYXdBcmM6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmFyYyhkYXRhLngsIGRhdGEueSwgZGF0YS5yLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgICAgICBzZWxmLmN0eC5maWxsU3R5bGUgPSBzZWxmLmlzV2hpdGUgPiAwID8gJyNmZmZmZmYnIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgc2VsZi5jdHguZmlsbCgpO1xuICAgICAgICAgICAgc2VsZi5jdHguY2xvc2VQYXRoKCk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog44Gy44Gj44GP44KK6L+U44GZ5Yem55CGXG4gICAgICAgICAqL1xuICAgICAgICByZXZlcnNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmlzV2hpdGUgKj0gLTE7XG5cbiAgICAgICAgICAgIHNlbGYuZHJhd0FyYyhzZWxmLmRhdGEpO1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uU3RvbmUgPSBTdG9uZTtcblxufSgpKTsiLCI7KGZ1bmN0aW9uKCkge1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcblxuICAgICAgICBpZiAoIWNhbnZhcy5nZXRDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNXcmFwcGVyJyk7XG4gICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IHdyYXBwZXIuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGJvYXJkID0gbmV3IG15T3RoZWxsby5Cb2FyZE1hbmFnZXIoY3R4KTtcblxuICAgICAgICAvLyDliJ3mnJ/kvY3nva7jgavnn7PjgpLjgrvjg4Pjg4hcbiAgICAgICAgYm9hcmQuc3RhcnRHYW1lKCk7XG5cbiAgICAgICAgLy8g44Kk44OZ44Oz44OI55m76YyyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgYm9hcmQucHV0U3RvbmUoZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KCkpO1xuXG4vKipcbiAqIC8vIFRPRE8g6LOq5ZWPXG4gKlxuICogMS5cbiDjgIzliKTlrprjgZnjgovjgI3jgajjgYTjgYboi7Hoqp7jga/kvZXjgpLkvb/jgaPjgabjgb7jgZnjgYvvvJ9cblxuIGZpbmQ/IGp1ZGdlPyBkZWNpZGU/XG5cblxuIDIuXG4gY2hyb21l44GuZGV244OE44O844Or44Gn44Kk44Oz44K544K/44Oz44K544Gr5YWl44Gj44Gm44GE44KLdOOBqOOBr+OBquOCk+OBruaEj+WRs+OAgeeVpe+8iO+8n++8ieOBp+OBmeOBi++8n+OCpOODs+OCueOCv+ODs+OCueOCkuODreOCsOOBq+WHuuOBmeOBqHTjgajjgarjgovvvJ9cbiBib2FyZC5zdGFydEdhbWXjga7mnIDlvozjgadjb25zb2xlLmxvZyhzZWxmLnN0b25lUG9zZXMpO+OBmeOCi+OBqOeiuuiqjeOBp+OBjeOCi1xuXG4gKi9cbiJdfQ==