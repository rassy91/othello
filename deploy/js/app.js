!function(){const t=function(t){this.ctx=t,this.cautionText=document.getElementById("caution"),this.stoneColorText=document.getElementById("stoneColor"),this.GRID_SIZE=50,this.LINE_NUMBER=9,this.R=.3*this.GRID_SIZE,this.isWhite=1,this.board=[],this.turnStones=[],this.init()};t.prototype={init:function(){const t=this;t.ctx.translate(1,1),t.drawBoard();for(let e=1;e<t.LINE_NUMBER;e++){let e=[];for(let i=1;i<t.LINE_NUMBER;i++)e.push({});t.board.push(e)}},drawBoard:function(){const t=this,e=t.GRID_SIZE*(t.LINE_NUMBER-1);let i=0,n=0;t.drawRect(i,n,e,e,"#008833");for(let o=1;o<=t.LINE_NUMBER;o++)t.drawLine(i,0,i,e),i+=t.GRID_SIZE;for(let o=1;o<=t.LINE_NUMBER;o++)t.drawLine(0,n,e,n),n+=t.GRID_SIZE},drawRect:function(t,e,i,n,o){this.ctx.fillStyle=void 0!==o?o:"#000000",this.ctx.fillRect(t,e,i,n)},drawLine:function(t,e,i,n,o,s){this.ctx.strokeStyle=void 0!==o?o:"#000000",this.ctx.lineWidth=void 0!==s?s:1,this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(i,n),this.ctx.closePath(),this.ctx.stroke()},startGame:function(){const t=this,e=t.GRID_SIZE*((t.LINE_NUMBER-1)/2),i=t.GRID_SIZE/2;let n,o,s=-1,h=-1,l=1;function r(){for(let r=0;r<2;r++){let r={r:t.R};n=e+s*i,o=e+h*i,r.x=n,r.y=o,r.isWhite=l;let c=new window.myOthello.Stone(t.ctx,r);c.drawArc(r);let a=t.board[Math.floor(o/t.GRID_SIZE)][Math.floor(n/t.GRID_SIZE)];a.instance=c,a.isWhite=l,s*=-1,h*=-1}}r(),s*=-1,l*=-1,r()},showCaution:function(){const t=this;t.cautionText.classList.contains("isVisible")||(t.cautionText.classList.add("isVisible"),setTimeout(function(){t.cautionText.classList.remove("isVisible")},1e3))},putStone:function(t,e){const i=this;let n=Math.floor(t/i.GRID_SIZE),o=Math.floor(e/i.GRID_SIZE);if(!i.checkVacancy(n,o))return void i.showCaution();if(!i.checkNeighbor(n,o))return void i.showCaution();if(!i.checkIfPossible(n,o))return void i.showCaution();i.isWhite*=-1;let s={x:i.GRID_SIZE*n+i.GRID_SIZE/2,y:i.GRID_SIZE*o+i.GRID_SIZE/2,r:i.R,isWhite:i.isWhite},h=new window.myOthello.Stone(i.ctx,s);h.drawArc(s);let l=i.board[o][n];l.instance=h,l.isWhite=i.isWhite,l.x=n,l.y=o,i.turnStones.length>0&&(i.turnStones.forEach(function(t){t.isWhite*=-1,t.instance.reverse()}),i.turnStones.length=0),i.stoneColorText.classList.contains("js-isWhite")?(i.stoneColorText.textContent="黒",i.stoneColorText.classList.remove("js-isWhite")):(i.stoneColorText.textContent="白",i.stoneColorText.classList.add("js-isWhite"))},checkVacancy:function(t,e){return Object.keys(this.board[e][t]).length<=0},checkNeighbor:function(t,e){const i=this;let n,o,s=[[t,e-1],[t+1,e-1],[t+1,e],[t+1,e+1],[t,e+1],[t-1,e+1],[t-1,e],[t-1,e-1]];for(let h=0,l=s.length;h<l;h++)if(n=s[h][0],o=s[h][1],!(n<0||n>7||o<0||o>7)&&Object.keys(i.board[o][n]).length>0)return!0},checkIfPossible:function(t,e){const i=this,n=i.LINE_NUMBER-1-1;let o,s=!1,h=null,l=null,r=[];return o=!1,function(){for(let c=1;c<=n&&!(e-c<0);c++)if(h=i.board[e-c][t],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t]).y=e-n,l.x=t,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7);c++)if(h=i.board[e+c][t],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t]).y=e+n,l.x=t,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(t-c<0);c++)if(h=i.board[e][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e][t-n]).y=e,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(t+c>7);c++)if(h=i.board[e][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e][t+n]).y=e,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e-c<0||t-c<0);c++)if(h=i.board[e-c][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t-n]).y=e-n,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7||t+c>7);c++)if(h=i.board[e+c][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t+n]).y=e+n,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e+c>7||t-c<0);c++)if(h=i.board[e+c][t-c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e+n][t-n]).y=e+n,l.x=t-n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),o=!1,function(){for(let c=1;c<=n&&!(e-c<0||t+c>7);c++)if(h=i.board[e-c][t+c],Object.keys(h).length>0&&-1*h.isWhite===i.isWhite){for(let n=1;n<c;n++){if((l=i.board[e-n][t+n]).y=e-n,l.x=t+n,!(Object.keys(l).length>0&&l.isWhite===i.isWhite)){o=!1,r.length=0,delete l.x,delete l.y;break}o=!0,r.push(l)}if(o){for(let t=0,e=r.length;t<e;t++)i.turnStones.push(r[t]);r.length=0,s=!0;break}}}(),s}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.BoardManager=t}(),function(){const t=function(t,e){this.canvas=t,this.color=e.color,this.stones=[],this.init()};t.prototype={init:function(){this.setEvent()},setEvent:function(){},getClickPos:function(){}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Player=t}(),function(){const t=function(t,e){this.ctx=t,this.data=e,this.isWhite=e.isWhite};t.prototype={drawArc:function(t){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0),this.ctx.fillStyle=this.isWhite>0?"#ffffff":"#000000",this.ctx.fill(),this.ctx.closePath()},reverse:function(){this.isWhite*=-1,this.drawArc(this.data)}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Stone=t}(),document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("canvas");if(!t.getContext)return;const e=t.getContext("2d"),i=document.getElementById("canvasWrapper");e.canvas.width=i.clientWidth,e.canvas.height=i.clientHeight;const n=new myOthello.BoardManager(e);n.startGame(),t.addEventListener("click",function(t){n.putStone(t.offsetX,t.offsetY)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJvYXJkTWFuYWdlci5qcyIsIlBsYXllci5qcyIsIlN0b25lLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIkJvYXJkTWFuYWdlciIsImN0eCIsInRoaXMiLCJjYXV0aW9uVGV4dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdG9uZUNvbG9yVGV4dCIsIkdSSURfU0laRSIsIkxJTkVfTlVNQkVSIiwiUiIsImlzV2hpdGUiLCJib2FyZCIsInR1cm5TdG9uZXMiLCJpbml0IiwicHJvdG90eXBlIiwic2VsZiIsInRyYW5zbGF0ZSIsImRyYXdCb2FyZCIsImkiLCJyb3ciLCJqIiwicHVzaCIsImZpZWxkU2l6ZSIsIngiLCJ5IiwiZHJhd1JlY3QiLCJkcmF3TGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiY29sb3IiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJzdGFydEdhbWUiLCJjZW50ZXIiLCJkaWZmIiwicG9zWCIsInBvc1kiLCJkaXIxIiwiZGlyMiIsInNldEZpcnN0U3RvbmUiLCJkYXRhIiwiciIsInN0b25lIiwid2luZG93IiwibXlPdGhlbGxvIiwiU3RvbmUiLCJkcmF3QXJjIiwib2JqIiwiTWF0aCIsImZsb29yIiwiaW5zdGFuY2UiLCJzaG93Q2F1dGlvbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwic2V0VGltZW91dCIsInJlbW92ZSIsInB1dFN0b25lIiwiY2xpY2tlZFgiLCJjbGlja2VkWSIsIm50aEdyaWRYIiwibnRoR3JpZFkiLCJjaGVja1ZhY2FuY3kiLCJjaGVja05laWdoYm9yIiwiY2hlY2tJZlBvc3NpYmxlIiwibGVuZ3RoIiwiZm9yRWFjaCIsInZhbCIsInJldmVyc2UiLCJ0ZXh0Q29udGVudCIsIm50aFgiLCJudGhZIiwiT2JqZWN0Iiwia2V5cyIsImxpbmUiLCJuZWlnaGJvcnMiLCJsZW4iLCJNQVhfQ09VTlQiLCJpc1RtcFBvc3NpYmxlIiwiaXNQb3NzaWJsZSIsInRtcE9iaiIsInRtcFR1cm5TdG9uZXMiLCJjaGVja1RvcCIsImNoZWNrQm90dG9tIiwiY2hlY2tMZWZ0IiwiY2hlY2tSaWdodCIsImNoZWNrTGVmdFRvcCIsImNoZWNrUmlnaHRCb3R0b20iLCJjaGVja0xlZnRCb3R0b20iLCJjaGVja1JpZ2h0VG9wIiwiUGxheWVyIiwiY2FudmFzIiwic3RvbmVzIiwic2V0RXZlbnQiLCJnZXRDbGlja1BvcyIsImFyYyIsIlBJIiwiZmlsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRDb250ZXh0Iiwid3JhcHBlciIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZSIsIm9mZnNldFgiLCJvZmZzZXRZIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQVFBLE1BQUFBLEVBQUEsU0FBQUMsR0FDQUMsS0FFQUQsSUFBQUEsRUFGQUMsS0FLQUMsWUFBQUMsU0FBQUMsZUFBQSxXQUxBSCxLQU1BSSxlQUFBRixTQUFBQyxlQUFBLGNBTkFILEtBU0FLLFVBQUEsR0FUQUwsS0FVQU0sWUFBQSxFQVZBTixLQVlBTyxFQUFBLEdBWkFQLEtBWUFLLFVBWkFMLEtBZ0JBUSxRQUFBLEVBaEJBUixLQW1CQVMsU0FuQkFULEtBc0JBVSxjQXRCQVYsS0F3QkFXLFFBR0FiLEVBQUFjLFdBS0FELEtBQUEsV0FDQSxNQUFBRSxFQUFBYixLQUdBYSxFQUFBZCxJQUFBZSxVQUFBLEVBQUEsR0FHQUQsRUFBQUUsWUFHQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUgsRUFBQVAsWUFBQVUsSUFBQSxDQUNBLElBQUFDLEtBRUEsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFMLEVBQUFQLFlBQUFZLElBQ0FELEVBQUFFLFNBR0FOLEVBQUFKLE1BQUFVLEtBQUFGLEtBUUFGLFVBQUEsV0FDQSxNQUFBRixFQUFBYixLQUVBb0IsRUFBQVAsRUFBQVIsV0FBQVEsRUFBQVAsWUFB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b0csT0FBQW5FLE1BQUE0RSxFQUFBQyxZQUNBOUcsRUFBQW9HLE9BQUFXLE9BQUFGLEVBQUFHLGFBRUEsTUFBQXRHLEVBQUEsSUFBQTJDLFVBQUF0RCxhQUFBQyxHQUdBVSxFQUFBK0IsWUFHQTJELEVBQUFPLGlCQUFBLFFBQUEsU0FBQU0sR0FFQXZHLEVBQUF3RCxTQUFBK0MsRUFBQUMsUUFBQUQsRUFBQUUiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIOOCs+ODs+OCueODiOODqeOCr+OCv1xuICAgICAqIOODnOODvOODieOBrueKtuaFi+OCkueuoeeQhuOBmeOCi1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjdHhcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdCBCb2FyZE1hbmFnZXIgPSBmdW5jdGlvbihjdHgpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5jdHggPSBjdHg7XG5cbiAgICAgICAgLy8gRE9NXG4gICAgICAgIHNlbGYuY2F1dGlvblRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F1dGlvbicpO1xuICAgICAgICBzZWxmLnN0b25lQ29sb3JUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b25lQ29sb3InKTtcblxuICAgICAgICAvL+WApFxuICAgICAgICBzZWxmLkdSSURfU0laRSA9IDUwO1xuICAgICAgICBzZWxmLkxJTkVfTlVNQkVSID0gOTtcbiAgICAgICAgLy8g55+z44Gu5Y2K5b6EXG4gICAgICAgIHNlbGYuUiA9IHNlbGYuR1JJRF9TSVpFICogMC4zO1xuXG4gICAgICAgIC8vIOeZvem7kuWIpOWumuODleODqeOCsFxuICAgICAgICAvLyAx44Gn55m944CBLTHjgafpu5JcbiAgICAgICAgc2VsZi5pc1doaXRlID0gMTtcblxuICAgICAgICAvLyDjgZ3jgozjgZ7jgozjga7jg57jgrnnm67jga7mg4XloLHjgpLmoLzntI1cbiAgICAgICAgc2VsZi5ib2FyZCA9IFtdO1xuXG4gICAgICAgIC8vIOOBsuOBo+OBj+OCiui/lOOBmeefs+OCkuS4gOaZgueahOOBq+agvOe0jeOBmeOCi1xuICAgICAgICBzZWxmLnR1cm5TdG9uZXMgPSBbXTtcblxuICAgICAgICBzZWxmLmluaXQoKTtcbiAgICB9O1xuXG4gICAgQm9hcmRNYW5hZ2VyLnByb3RvdHlwZSA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICog5Yid5pyf5YyWXG4gICAgICAgICAqL1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyB4PTAsIHk9MOOBp+WFiOOBruWkquOBleOBjOWNiuWIhuOBl+aPj+WGmeOBleOCjOOBquOBhOOBn+OCgeOAgeWfuua6lueCueOCkuOBmuOCieOBmVxuICAgICAgICAgICAgc2VsZi5jdHgudHJhbnNsYXRlKDEsIDEpO1xuXG4gICAgICAgICAgICAvLyDjg5zjg7zjg4njgpLmj4/lhplcbiAgICAgICAgICAgIHNlbGYuZHJhd0JvYXJkKCk7XG5cbiAgICAgICAgICAgIC8vIOWQhOODnuOCueebruOBq+aDheWgseS/neaMgeeUqOOBruOCquODluOCuOOCp+OCr+ODiOOCkuOCguOBn+OBm+OBpuODnOODvOODieaDheWgseOBrumFjeWIl+OBq+agvOe0jVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzZWxmLkxJTkVfTlVNQkVSOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IHNlbGYuTElORV9OVU1CRVI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICByb3cucHVzaCh7fSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VsZi5ib2FyZC5wdXNoKHJvdyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog44Oc44O844OJ44KS5o+P5YaZXG4gICAgICAgICAqL1xuICAgICAgICBkcmF3Qm9hcmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2l6ZSA9IHNlbGYuR1JJRF9TSVpFICogKHNlbGYuTElORV9OVU1CRVIgLSAxKTtcblxuICAgICAgICAgICAgbGV0IHggPSAwO1xuICAgICAgICAgICAgbGV0IHkgPSAwO1xuXG4gICAgICAgICAgICBzZWxmLmRyYXdSZWN0KHgsIHksIGZpZWxkU2l6ZSwgZmllbGRTaXplLCAnIzAwODgzMycpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzZWxmLkxJTkVfTlVNQkVSOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRyYXdMaW5lKHgsIDAsIHgsIGZpZWxkU2l6ZSk7XG4gICAgICAgICAgICAgICAgeCArPSBzZWxmLkdSSURfU0laRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlbGYuTElORV9OVU1CRVI7IGkrKykge1xuICAgICAgICAgICAgICAgIHNlbGYuZHJhd0xpbmUoMCwgeSwgZmllbGRTaXplLCB5KTtcbiAgICAgICAgICAgICAgICB5ICs9IHNlbGYuR1JJRF9TSVpFO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWbm+inkuW9ouOCkuaPj+WGmVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHkxXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geTJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gICAgICAgICAqL1xuICAgICAgICBkcmF3UmVjdDogZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIGNvbG9yKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgc2VsZi5jdHguZmlsbFN0eWxlID0gdHlwZW9mIGNvbG9yICE9PSAndW5kZWZpbmVkJyA/IGNvbG9yIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgc2VsZi5jdHguZmlsbFJlY3QoeDEsIHkxLCB4MiwgeTIpO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOe3muOCkuaPj+WGmVxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geDFcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHkxXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geTJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICAgICAgKi9cbiAgICAgICAgZHJhd0xpbmU6IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyLCBjb2xvciwgd2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5zdHJva2VTdHlsZSA9IHR5cGVvZiBjb2xvciAhPT0gJ3VuZGVmaW5lZCcgPyBjb2xvciA6ICcjMDAwMDAwJztcbiAgICAgICAgICAgIHNlbGYuY3R4LmxpbmVXaWR0aCA9IHR5cGVvZiB3aWR0aCAhPT0gJ3VuZGVmaW5lZCcgPyB3aWR0aCA6IDE7XG5cbiAgICAgICAgICAgIHNlbGYuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgc2VsZi5jdHgubW92ZVRvKHgxLCB5MSk7XG4gICAgICAgICAgICBzZWxmLmN0eC5saW5lVG8oeDIsIHkyKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5zdHJva2UoKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDjgrLjg7zjg6Djgrnjgr/jg7zjg4jmmYLjgavlrp/ooYxcbiAgICAgICAgICovXG4gICAgICAgIHN0YXJ0R2FtZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gc2VsZi5HUklEX1NJWkUgKiAoKHNlbGYuTElORV9OVU1CRVIgLSAxKSAvIDIpO1xuICAgICAgICAgICAgY29uc3QgZGlmZiA9IChzZWxmLkdSSURfU0laRSAvIDIpO1xuICAgICAgICAgICAgbGV0IGRpcjEgPSAtMTtcbiAgICAgICAgICAgIGxldCBkaXIyID0gLTE7XG4gICAgICAgICAgICBsZXQgcG9zWCwgcG9zWTtcbiAgICAgICAgICAgIGxldCBpc1doaXRlID0gMTtcblxuICAgICAgICAgICAgc2V0Rmlyc3RTdG9uZSgpO1xuICAgICAgICAgICAgZGlyMSAqPSAtMTtcbiAgICAgICAgICAgIGlzV2hpdGUgKj0gLTE7XG4gICAgICAgICAgICBzZXRGaXJzdFN0b25lKCk7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICog5Yid5pyf5L2N572u44Gr55+z44KS44K744OD44OIXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldEZpcnN0U3RvbmUoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIOiHquWIhueUqOODoeODou+8mumWouaVsOOBruWkluWBtOOBp+Wumue+qeOBl+OBpuOBiuOCiuOAgeOCquODluOCuOOCp+OCr+ODiOOBruWPgueFp+a4oeOBl+OBp+W8leOBo+OBi+OBi+OBo+OBn1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6IHNlbGYuUlxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSBjZW50ZXIgKyBkaXIxICogZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9IGNlbnRlciArIGRpcjIgKiBkaWZmO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEueCA9IHBvc1g7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEueSA9IHBvc1k7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuaXNXaGl0ZSA9IGlzV2hpdGU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g44Kk44Oz44K544K/44Oz44K544KS5L2c5oiQXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdG9uZSA9IG5ldyB3aW5kb3cubXlPdGhlbGxvLlN0b25lKHNlbGYuY3R4LCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g55+z44KS5o+P5YaZXG4gICAgICAgICAgICAgICAgICAgIHN0b25lLmRyYXdBcmMoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g44Oc44O844OJ44Gu6YWN5YiX44Gu6Kmy5b2T5L2N572u44Gr44Kk44Oz44K544K/44Oz44K544Go54++5Zyo44Gu55m96buS54q25oWL44KS5qC857SNXG4gICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBzZWxmLmJvYXJkW01hdGguZmxvb3IocG9zWSAvIHNlbGYuR1JJRF9TSVpFKV1bTWF0aC5mbG9vcihwb3NYIC8gc2VsZi5HUklEX1NJWkUpXTtcbiAgICAgICAgICAgICAgICAgICAgb2JqLmluc3RhbmNlID0gc3RvbmU7XG4gICAgICAgICAgICAgICAgICAgIG9iai5pc1doaXRlID0gaXNXaGl0ZTtcblxuICAgICAgICAgICAgICAgICAgICBkaXIxICo9IC0xO1xuICAgICAgICAgICAgICAgICAgICBkaXIyICo9IC0xO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDnn7PjgpLnva7jgZHjgarjgYTkvY3nva7jga7loLTlkIjjgIHms6jmhI/mm7jjgY3jgpLooajnpLrjgZnjgotcbiAgICAgICAgICovXG4gICAgICAgIHNob3dDYXV0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoIXNlbGYuY2F1dGlvblRleHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpc1Zpc2libGUnKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuY2F1dGlvblRleHQuY2xhc3NMaXN0LmFkZCgnaXNWaXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXV0aW9uVGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdpc1Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDnn7PjgpLnva7jgY/lh6bnkIZcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGNsaWNrZWRYIDogY2FudmFz5LiK44Gu44Kv44Oq44OD44Kv5L2N572uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjbGlja2VkWSA6IGNhbnZhc+S4iuOBruOCr+ODquODg+OCr+S9jee9rlxuICAgICAgICAgKi9cbiAgICAgICAgcHV0U3RvbmU6IGZ1bmN0aW9uKGNsaWNrZWRYLCBjbGlja2VkWSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIOS9leeVquebruOBruODnuOCueOBi1xuICAgICAgICAgICAgbGV0IG50aEdyaWRYID0gTWF0aC5mbG9vcihjbGlja2VkWCAvIHNlbGYuR1JJRF9TSVpFKTtcbiAgICAgICAgICAgIGxldCBudGhHcmlkWSA9IE1hdGguZmxvb3IoY2xpY2tlZFkgLyBzZWxmLkdSSURfU0laRSk7XG5cbiAgICAgICAgICAgIC8vIOefs+OBjOe9ruOBkeOCi+OBi+OBruWIpOWumlxuICAgICAgICAgICAgaWYgKCFzZWxmLmNoZWNrVmFjYW5jeShudGhHcmlkWCwgbnRoR3JpZFkpKSB7XG4gICAgICAgICAgICAgICAgLy8g44Kv44Oq44OD44Kv44GX44Gf44Oe44K544GM56m644GL44Gp44GG44GLXG5cbiAgICAgICAgICAgICAgICAvLyDnn7PjgpLnva7jgZHjgarjgYTkvY3nva7jga7loLTlkIjjgIHms6jmhI/mm7jjgY3jgpLooajnpLrjgZnjgotcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dDYXV0aW9uKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFzZWxmLmNoZWNrTmVpZ2hib3IobnRoR3JpZFgsIG50aEdyaWRZKSkge1xuICAgICAgICAgICAgICAgIC8vIOOCr+ODquODg+OCr+OBl+OBn+ODnuOCueOBjOefs+OBq+OBqOOBquOCiuWQiOOBo+OBpuOBhOOCi+OBi+OBqeOBhuOBi1xuXG4gICAgICAgICAgICAgICAgLy8g55+z44KS572u44GR44Gq44GE5L2N572u44Gu5aC05ZCI44CB5rOo5oSP5pu444GN44KS6KGo56S644GZ44KLXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93Q2F1dGlvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZi5jaGVja0lmUG9zc2libGUobnRoR3JpZFgsIG50aEdyaWRZKSkge1xuICAgICAgICAgICAgICAgIC8vIOOCr+ODquODg+OCr+OBl+OBn+ODnuOCueOBjOefs+OCkuOBsuOBo+OBj+OCiui/lOOBm+OCi+ODnuOCueOBi+OBqeOBhuOBi1xuXG4gICAgICAgICAgICAgICAgLy8g55+z44KS572u44GR44Gq44GE5L2N572u44Gu5aC05ZCI44CB5rOo5oSP5pu444GN44KS6KGo56S644GZ44KLXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93Q2F1dGlvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDnn7PjgpLnva7jgZHjgZ/loLTlkIjjgIHoibLjgpLlj43ou6JcbiAgICAgICAgICAgIHNlbGYuaXNXaGl0ZSAqPSAtMTtcblxuICAgICAgICAgICAgLy8g44Kk44Oz44K544K/44Oz44K544Gr5rih44GZ5oOF5aCxXG4gICAgICAgICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICB4OiAoc2VsZi5HUklEX1NJWkUgKiBudGhHcmlkWCkgKyAoc2VsZi5HUklEX1NJWkUgLyAyKSxcbiAgICAgICAgICAgICAgICB5OiAoc2VsZi5HUklEX1NJWkUgKiBudGhHcmlkWSkgKyAoc2VsZi5HUklEX1NJWkUgLyAyKSxcbiAgICAgICAgICAgICAgICByOiBzZWxmLlIsXG4gICAgICAgICAgICAgICAgaXNXaGl0ZTogc2VsZi5pc1doaXRlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLkvZzmiJBcbiAgICAgICAgICAgIGxldCBzdG9uZSA9IG5ldyB3aW5kb3cubXlPdGhlbGxvLlN0b25lKHNlbGYuY3R4LCBkYXRhKTtcbiAgICAgICAgICAgIHN0b25lLmRyYXdBcmMoZGF0YSk7XG5cbiAgICAgICAgICAgIC8vIOWPr+iqreaAp+OBruOBn+OCgeOAgeOBhOOBo+OBn+OCk+WkieaVsOOBq+ipsuW9k+OCquODluOCuOOCp+OCr+ODiOOCkuagvOe0jVxuICAgICAgICAgICAgbGV0IG9iaiA9IHNlbGYuYm9hcmRbbnRoR3JpZFldW250aEdyaWRYXTtcbiAgICAgICAgICAgIG9iai5pbnN0YW5jZSA9IHN0b25lO1xuICAgICAgICAgICAgb2JqLmlzV2hpdGUgPSBzZWxmLmlzV2hpdGU7XG4gICAgICAgICAgICBvYmoueCA9IG50aEdyaWRYO1xuICAgICAgICAgICAgb2JqLnkgPSBudGhHcmlkWTtcblxuICAgICAgICAgICAgLy8g44Gy44Gj44GP44KK6L+U44GZ55+z44GM44GC44KL5aC05ZCI44Gv44Gy44Gj44GP44KK6L+U44GZXG4gICAgICAgICAgICBpZiAoc2VsZi50dXJuU3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMuZm9yRWFjaChmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsLmlzV2hpdGUgKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHZhbC5pbnN0YW5jZS5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g44Gp44Gh44KJ44Gu55Wq44GL44Gu6KGo56S644KS5YiH44KK5pu/44GIXG4gICAgICAgICAgICBpZiAoIXNlbGYuc3RvbmVDb2xvclRleHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1pc1doaXRlJykpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnN0b25lQ29sb3JUZXh0LnRleHRDb250ZW50ID0gJ+eZvSc7XG4gICAgICAgICAgICAgICAgc2VsZi5zdG9uZUNvbG9yVGV4dC5jbGFzc0xpc3QuYWRkKCdqcy1pc1doaXRlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuc3RvbmVDb2xvclRleHQudGV4dENvbnRlbnQgPSAn6buSJztcbiAgICAgICAgICAgICAgICBzZWxmLnN0b25lQ29sb3JUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWlzV2hpdGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDjgq/jg6rjg4Pjgq/jgZfjgZ/jg57jgrnjgYznqbrjgYvjganjgYbjgYvjgpLliKTlrppcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFggOiDkvZXnlarnm67jga7jg57jgrnjgYvvvIgxLTjvvIlcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG50aFkgOiDkvZXnlarnm67jga7jg57jgrnjgYvvvIgxLTjvvIlcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBjaGVja1ZhY2FuY3k6IGZ1bmN0aW9uKG50aFgsIG50aFkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoc2VsZi5ib2FyZFtudGhZXVtudGhYXSkubGVuZ3RoIDw9IDA7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog44Kv44Oq44OD44Kv44GX44Gf44Oe44K544GM55+z44Gr44Go44Gq44KK5ZCI44Gj44Gm44GE44KL44GL44Gp44GG44GL44KS5Yik5a6aXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudGhYIDog5L2V55Wq55uu44Gu44Oe44K544GL77yIMS0477yJXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudGhZIDog5L2V55Wq55uu44Gu44Oe44K544GL77yIMS0477yJXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgY2hlY2tOZWlnaGJvcjogZnVuY3Rpb24obnRoWCwgbnRoWSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIGxldCByb3csIGxpbmU7XG5cbiAgICAgICAgICAgIGxldCBuZWlnaGJvcnMgPSBbXG4gICAgICAgICAgICAgICAgW250aFgsIG50aFkgLSAxXSwgICAgICAgLy8g5LiKXG4gICAgICAgICAgICAgICAgW250aFggKyAxLCBudGhZIC0gMV0sICAgLy8g5Y+z5LiKXG4gICAgICAgICAgICAgICAgW250aFggKyAxLCBudGhZXSwgICAgICAgLy8g5Y+zXG4gICAgICAgICAgICAgICAgW250aFggKyAxLCBudGhZICsgMV0sICAgLy8g5Y+z5LiLXG4gICAgICAgICAgICAgICAgW250aFgsIG50aFkgKyAxXSwgICAgICAgLy8g5LiLXG4gICAgICAgICAgICAgICAgW250aFggLSAxLCBudGhZICsgMV0sICAgLy8g5bem5LiLXG4gICAgICAgICAgICAgICAgW250aFggLSAxLCBudGhZXSwgICAgICAgLy8g5bemXG4gICAgICAgICAgICAgICAgW250aFggLSAxLCBudGhZIC0gMV0gICAgLy8g5bem5LiKXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbmVpZ2hib3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICByb3cgPSBuZWlnaGJvcnNbaV1bMF07XG4gICAgICAgICAgICAgICAgbGluZSA9IG5laWdoYm9yc1tpXVsxXTtcblxuICAgICAgICAgICAgICAgIC8vIOODnOODvOODieOBi+OCieOBr+OBv+WHuuOBmeOBqOOBjeOBr+OCueOCreODg+ODl1xuICAgICAgICAgICAgICAgIGlmIChyb3cgPCAwIHx8IHJvdyA+IDcgfHwgbGluZSA8IDAgfHwgbGluZSA+IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuYm9hcmRbbGluZV1bcm93XSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog44Kv44Oq44OD44Kv44GX44Gf44Oe44K544GM55+z44KS44Gy44Gj44GP44KK6L+U44Gb44KL44Oe44K544GL44Gp44GG44GL44KS5Yik5a6aXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudGhYXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudGhZXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgY2hlY2tJZlBvc3NpYmxlOiBmdW5jdGlvbihudGhYLCBudGhZKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy8gVE9ETyDoh6rliIbnlKjjg6Hjg6LvvJrjgIDkuInop5LplqLmlbDjgpLkvb/jgYbjgajku6XkuIvliKTlrprjgZfjgoTjgZnjgZ3jgYbjgaDjgYwgTWF0aC5jb3MoTWF0aC5QSSAvIDIp44GnMeOBq+OBquOCieOBquOBhFxuICAgICAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhpICsgJyAvIDQnKTtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhNYXRoLmNvcyhNYXRoLlBJIC8gNCAqIGkpLCBNYXRoLnNpbihNYXRoLlBJIC8gNCAqIGkpKTtcbiAgICAgICAgICAgIC8vIH1cblxuXG4gICAgICAgICAgICBjb25zdCBNQVhfQ09VTlQgPSAoc2VsZi5MSU5FX05VTUJFUiAtIDEpIC0gMTsgLy8gKCjnt5rjga7mlbAtMSkgLSDoh6rouqvjgYznva7jgYvjgozjgovjg57jgrkpXG4gICAgICAgICAgICAvLyDkuIDmlrnlkJHjgafjgoLnn7PjgYzjgbLjgaPjgY/jgorov5TjgZvjgozjgbB0cnVl44Gr44GZ44KLXG4gICAgICAgICAgICBsZXQgaXNQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8g5ZCE5pa55ZCR44Gn55+z44KS44Gy44Gj44GP44KK6L+U44Gb44KL44GL44KS44OB44Kn44OD44Kv44GZ44KL44OV44Op44KwXG4gICAgICAgICAgICBsZXQgaXNUbXBQb3NzaWJsZTtcbiAgICAgICAgICAgIC8vIOODgeOCp+ODg+OCr+OBmeOCi+efs+OBruaDheWgseOCkuagvOe0je+8iOOCr+ODquODg+OCr+OBl+OBn+S9jee9ruOBi+OCiei/keOBhOeuh+aJgOOBi+OCieODgeOCp+ODg+OCr++8iVxuICAgICAgICAgICAgbGV0IG9iaiA9IG51bGw7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgbGV0IHRtcE9iaiA9IG51bGw7XG4gICAgICAgICAgICBsZXQgdG1wVHVyblN0b25lcyA9IFtdO1xuXG4gICAgICAgICAgICAvLyDnva7jgZHjgovmnaHku7ZcbiAgICAgICAgICAgIC8vIOW3puWPs+OAgeS4iuS4i+OAgeaWnOOCgTQ15bqm5LiK44Gr5ZCM44GY6Imy44Gu55+z44GM44GC44KLXG4gICAgICAgICAgICAvLyDjgYvjgaQg44Gd44Gu5ZCM44GY6Imy44Gu55+z44Go6Ieq6Lqr44Gu6ZaT44Gr6ZqZ6ZaT44Gq44GP5Yil44Gu6Imy44Gu55+z44GM44GC44KLXG5cbiAgICAgICAgICAgIC8vIOS4iuOAgeWPs+S4iuOAgeWPs+OAgeWPs+S4i+OAgeS4i+OAgeW3puS4i+OAgeW3puOAgeW3puS4iuOAgeOBp+OBneOCjOOBnuOCjOODgeOCp+ODg+OCr+OBmeOCi1xuICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2hlY2tUb3AoKTtcblxuICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2hlY2tCb3R0b20oKTtcblxuICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2hlY2tMZWZ0KCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrUmlnaHQoKTtcblxuICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2hlY2tMZWZ0VG9wKCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrUmlnaHRCb3R0b20oKTtcblxuICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgY2hlY2tMZWZ0Qm90dG9tKCk7XG5cbiAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNoZWNrUmlnaHRUb3AoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGlzUG9zc2libGU7XG5cbiAgICAgICAgICAgIC8vIOS4iuOCkuODgeOCp+ODg+OCr1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tUb3AoKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhZIC0gaSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6Ieq6Lqr44GL44KJ6Kmy5b2T5pa55ZCR44Gu5Lit44Gn5LiA55Wq6L+R44GE55+zXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHNlbGYuYm9hcmRbbnRoWSAtIGldW250aFhdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOODgeOCp+ODg+OCr+OBmeOCi+aWueWQkeOBq+aDheWgseOBjOOBguOCiu+8neefs+OBjOe9ruOBi+OCjOOBpuOBiuOCiuOAgeOBi+OBpOOAgeWQjOOBmOiJsuOBruWgtOWQiFxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Oq44OD44Kv44GX44Gf5L2N572u44GL44KJ44CB5LiK6KiY55+z44Gu5aC05omA44G+44Gn44Gu55+z44KS56K66KqNXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8g6Ieq5YiG55So44Oh44Oi77yac2VsZi5ib2FyZFt5XVt4XeOCknRtcE9iauOBq+WPgueFp+a4oeOBl+OBl+OBpuOBhOOBpuODj+ODnuOBo+OBn1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSAtIGpdW250aFhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSAtIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModG1wT2JqKS5sZW5ndGggPiAwICYmIHRtcE9iai5pc1doaXRlID09PSBzZWxmLmlzV2hpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g44OB44Kn44OD44Kv44GZ44KL5pa55ZCR44Gr5oOF5aCx44GM44GC44KK77yd55+z44GM572u44GL44KM44Gm44GK44KK44CB44GL44Gk44CB6YGV44GG6Imy44Gu5aC05ZCIXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMucHVzaCh0bXBPYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g55+z44GM44Gq44GE44GL5ZCM44GY6Imy44Gu5aC05ZCI44Gv5Yem55CG44KS5oqc44GR44KLXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yem55CG57WC5LqG44Gu5aC05ZCI44Gv44Kq44OW44K444Kn44Kv44OI44Gr5LiA5pmC55qE44Gr5qC857SN44GX44Gm44GE44Gf5oOF5aCx44KS5YmK6Zmk44GZ44KLXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Oq44OD44Kv44GX44Gf5L2N572u44Go44OB44Kn44OD44Kv44GZ44KL5pa55ZCR44Gu5pyA55+t44Gu5ZCM44GY6Imy44Gu55+z44G+44Gn44Gu6ZaT44GM44GZ44G544Gm6YGV44GG6Imy44Gu55+z44Gu5aC05ZCIXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0JvdHRvbSgpIHtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IE1BWF9DT1VOVDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG50aFkgKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgKyBpXVtudGhYXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBpOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSArIGpdW250aFhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSArIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRtcE9iaikubGVuZ3RoID4gMCAmJiB0bXBPYmouaXNXaGl0ZSA9PT0gc2VsZi5pc1doaXRlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMucHVzaCh0bXBPYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RtcFBvc3NpYmxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gdG1wVHVyblN0b25lcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMucHVzaCh0bXBUdXJuU3RvbmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9zc2libGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8g5bem44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnQoKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhYIC0gaSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6Ieq6Lqr44GL44KJ6Kmy5b2T5pa55ZCR44Gu5Lit44Gn5LiA55Wq6L+R44GE55+zXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IHNlbGYuYm9hcmRbbnRoWV1bbnRoWCAtIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWV1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueCA9IG50aFggLSBqO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRtcE9iaikubGVuZ3RoID4gMCAmJiB0bXBPYmouaXNXaGl0ZSA9PT0gc2VsZi5pc1doaXRlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMucHVzaCh0bXBPYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLng7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RtcFBvc3NpYmxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gdG1wVHVyblN0b25lcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnR1cm5TdG9uZXMucHVzaCh0bXBUdXJuU3RvbmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5Y+z44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0KCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWCArIGkgPiA3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFldW250aFggKyBpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoKE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID4gMCkgJiYgKG9iai5pc1doaXRlICogLTEgPT09IHNlbGYuaXNXaGl0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBpOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmogPSBzZWxmLmJvYXJkW250aFldW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYICsgajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5bem5LiK44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnRUb3AoKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhZIC0gaSA8IDAgfHwgbnRoWCAtIGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgLSBpXVtudGhYIC0gaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApICYmIChvYmouaXNXaGl0ZSAqIC0xID09PSBzZWxmLmlzV2hpdGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqID0gc2VsZi5ib2FyZFtudGhZIC0gal1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSAtIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYIC0gajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Y+z5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0Qm90dG9tKCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWSArIGkgPiA3IHx8IG50aFggKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgYvjgonoqbLlvZPmlrnlkJHjga7kuK3jgafkuIDnlarov5HjgYTnn7NcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5ib2FyZFtudGhZICsgaV1bbnRoWCArIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSArIGpdW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFkgKyBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai54ID0gbnRoWCArIGo7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModG1wT2JqKS5sZW5ndGggPiAwICYmIHRtcE9iai5pc1doaXRlID09PSBzZWxmLmlzV2hpdGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5wdXNoKHRtcE9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVG1wUG9zc2libGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSB0bXBUdXJuU3RvbmVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5wdXNoKHRtcFR1cm5TdG9uZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5bem5LiL44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xlZnRCb3R0b20oKSB7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBNQVhfQ09VTlQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChudGhZICsgaSA+IDcgfHwgbnRoWCAtIGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiHqui6q+OBi+OCieipsuW9k+aWueWQkeOBruS4reOBp+S4gOeVqui/keOBhOefs1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBzZWxmLmJvYXJkW250aFkgKyBpXVtudGhYIC0gaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+IDApICYmIChvYmouaXNXaGl0ZSAqIC0xID09PSBzZWxmLmlzV2hpdGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqID0gc2VsZi5ib2FyZFtudGhZICsgal1bbnRoWCAtIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai55ID0gbnRoWSArIGo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wT2JqLnggPSBudGhYIC0gajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0bXBPYmopLmxlbmd0aCA+IDAgJiYgdG1wT2JqLmlzV2hpdGUgPT09IHNlbGYuaXNXaGl0ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLnB1c2godG1wT2JqKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUbXBQb3NzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai54O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG1wT2JqLnk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUbXBQb3NzaWJsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHRtcFR1cm5TdG9uZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50dXJuU3RvbmVzLnB1c2godG1wVHVyblN0b25lc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFR1cm5TdG9uZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Y+z5LiK44KS44OB44Kn44OD44KvXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja1JpZ2h0VG9wKCkge1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTUFYX0NPVU5UOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobnRoWSAtIGkgPCAwIHx8IG50aFggKyBpID4gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgYvjgonoqbLlvZPmlrnlkJHjga7kuK3jgafkuIDnlarov5HjgYTnn7NcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gc2VsZi5ib2FyZFtudGhZIC0gaV1bbnRoWCArIGldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPiAwKSAmJiAob2JqLmlzV2hpdGUgKiAtMSA9PT0gc2VsZi5pc1doaXRlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iaiA9IHNlbGYuYm9hcmRbbnRoWSAtIGpdW250aFggKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBPYmoueSA9IG50aFkgLSBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcE9iai54ID0gbnRoWCArIGo7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModG1wT2JqKS5sZW5ndGggPiAwICYmIHRtcE9iai5pc1doaXRlID09PSBzZWxmLmlzV2hpdGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1RtcFBvc3NpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5wdXNoKHRtcE9iaik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVG1wUG9zc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHVyblN0b25lcy5sZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0bXBPYmoueDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRtcE9iai55O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVG1wUG9zc2libGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSB0bXBUdXJuU3RvbmVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHVyblN0b25lcy5wdXNoKHRtcFR1cm5TdG9uZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBUdXJuU3RvbmVzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQb3NzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uQm9hcmRNYW5hZ2VyID0gQm9hcmRNYW5hZ2VyO1xuXG59KCkpOyIsIjsoZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBQbGF5ZXIgPSBmdW5jdGlvbihjYW52YXMsIGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5jYW52YXMgPSBjYW52YXM7XG5cbiAgICAgICAgc2VsZi5jb2xvciA9IGRhdGEuY29sb3I7XG4gICAgICAgIHNlbGYuc3RvbmVzID0gW107XG5cbiAgICAgICAgc2VsZi5pbml0KCk7XG4gICAgfTtcblxuICAgIFBsYXllci5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgc2VsZi5zZXRFdmVudCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEV2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBzZWxmLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlLm9mZnNldFgpO1xuICAgICAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBnZXRDbGlja1BvczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdy5teU90aGVsbG8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdpbmRvdy5teU90aGVsbG8gPSB7fTtcbiAgICB9XG4gICAgd2luZG93Lm15T3RoZWxsby5QbGF5ZXIgPSBQbGF5ZXI7XG5cbn0oKSk7IiwiOyhmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIOOBneOCjOOBnuOCjOOBruefs+OBruaDheWgsVxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjdHhcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSA6IOS9jee9ruOBqOiJsuOCkuS/neaMgVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0IFN0b25lID0gZnVuY3Rpb24oY3R4LCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuY3R4ID0gY3R4O1xuICAgICAgICBzZWxmLmRhdGEgPSBkYXRhO1xuICAgICAgICBzZWxmLmlzV2hpdGUgPSBkYXRhLmlzV2hpdGU7XG5cbiAgICB9O1xuXG4gICAgU3RvbmUucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDnn7PjgpLmj4/lhplcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIGRyYXdBcmM6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmFyYyhkYXRhLngsIGRhdGEueSwgZGF0YS5yLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgICAgICBzZWxmLmN0eC5maWxsU3R5bGUgPSBzZWxmLmlzV2hpdGUgPiAwID8gJyNmZmZmZmYnIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgc2VsZi5jdHguZmlsbCgpO1xuICAgICAgICAgICAgc2VsZi5jdHguY2xvc2VQYXRoKCk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog44Gy44Gj44GP44KK6L+U44GZ5Yem55CGXG4gICAgICAgICAqL1xuICAgICAgICByZXZlcnNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmlzV2hpdGUgKj0gLTE7XG5cbiAgICAgICAgICAgIHNlbGYuZHJhd0FyYyhzZWxmLmRhdGEpO1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uU3RvbmUgPSBTdG9uZTtcblxufSgpKTsiLCI7KGZ1bmN0aW9uKCkge1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcblxuICAgICAgICBpZiAoIWNhbnZhcy5nZXRDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXNXcmFwcGVyJyk7XG4gICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IHdyYXBwZXIuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGJvYXJkID0gbmV3IG15T3RoZWxsby5Cb2FyZE1hbmFnZXIoY3R4KTtcblxuICAgICAgICAvLyDliJ3mnJ/kvY3nva7jgavnn7PjgpLjgrvjg4Pjg4hcbiAgICAgICAgYm9hcmQuc3RhcnRHYW1lKCk7XG5cbiAgICAgICAgLy8g44Kk44OZ44Oz44OI55m76YyyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgYm9hcmQucHV0U3RvbmUoZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KCkpO1xuXG4vKipcbiAqIC8vIFRPRE8g6LOq5ZWPXG4gKlxuICogMS5cbiDjgIzliKTlrprjgZnjgovjgI3jgajjgYTjgYboi7Hoqp7jga/kvZXjgpLkvb/jgaPjgabjgb7jgZnjgYvvvJ9cblxuIGZpbmQ/IGp1ZGdlPyBkZWNpZGU/XG5cblxuIDIuXG4gY2hyb21l44GuZGV244OE44O844Or44Gn44Kk44Oz44K544K/44Oz44K544Gr5YWl44Gj44Gm44GE44KLdOOBqOOBr+OBquOCk+OBruaEj+WRs+OAgeeVpe+8iO+8n++8ieOBp+OBmeOBi++8n+OCpOODs+OCueOCv+ODs+OCueOCkuODreOCsOOBq+WHuuOBmeOBqHTjgajjgarjgovvvJ9cbiBib2FyZC5zdGFydEdhbWXjga7mnIDlvozjgadjb25zb2xlLmxvZyhzZWxmLnN0b25lUG9zZXMpO+OBmeOCi+OBqOeiuuiqjeOBp+OBjeOCi1xuXG4gKi9cbiJdfQ==