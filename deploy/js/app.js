!function(){const t=function(t){this.ctx=t,this.GRID_SIZE=50,this.LINE_NUMBER=9,this.R=.3*this.GRID_SIZE,this.stonePoses=[],this.init()};t.prototype={init:function(){this.ctx.translate(1,1),this.drawBoard()},drawBoard:function(){const t=this,o=t.GRID_SIZE*(t.LINE_NUMBER-1);let n=0,i=0;t.drawRect(n,i,o,o,"#008833");for(let e=1;e<=t.LINE_NUMBER;e++)t.drawLine(n,0,n,o),n+=t.GRID_SIZE;for(let e=1;e<=t.LINE_NUMBER;e++)t.drawLine(0,i,o,i),i+=t.GRID_SIZE},drawRect:function(t,o,n,i,e){this.ctx.fillStyle=void 0!==e?e:"#000000",this.ctx.fillRect(t,o,n,i)},drawLine:function(t,o,n,i,e,s){this.ctx.strokeStyle=void 0!==e?e:"#000000",this.ctx.lineWidth=void 0!==s?s:1,this.ctx.beginPath(),this.ctx.moveTo(t,o),this.ctx.lineTo(n,i),this.ctx.closePath(),this.ctx.stroke()},startGame:function(){const t=this,o=t.GRID_SIZE*((t.LINE_NUMBER-1)/2),n=t.GRID_SIZE/2;let i,e,s=-1,c=-1,h={r:t.R};function l(l){for(let r=0;r<2;r++){i=o+s*n,e=o+c*n,h.x=i,h.y=e,h.color=l;let r=new window.myOthello.Stone(t.ctx,h);r.drawArc(h),t.stonePoses.push({instance:r,pos:[Math.floor(i/t.GRID_SIZE),Math.floor(e/t.GRID_SIZE)]}),s*=-1,c*=-1}}l("#ffffff"),s*=-1,l("#000000")},getPosOnBoard:function(t,o){return[Math.floor(t/this.GRID_SIZE),Math.floor(o/this.GRID_SIZE)]},putStone:function(t,o,n){let i=Math.floor(t/this.GRID_SIZE),e=Math.floor(o/this.GRID_SIZE);if(this.checkVacancy([i,e])>0)return;let s={x:this.GRID_SIZE*i+this.GRID_SIZE/2,y:this.GRID_SIZE*e+this.GRID_SIZE/2,r:this.R,color:n},c=new window.myOthello.Stone(this.ctx,s);c.drawArc(s),this.stonePoses.push({instance:c,pos:[i,e]})},checkVacancy:function(t){return this.stonePoses.filter(function(o){return o.pos[0]===t[0]&&o.pos[1]===t[1]}).length}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.BoardManager=t}(),function(){const t=function(t,o){this.canvas=t,this.color=o.color,this.stones=[],this.init()};t.prototype={init:function(){this.setEvent()},setEvent:function(){},getClickPos:function(){}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Player=t}(),function(){const t=function(t,o){this.ctx=t,this.color=o.color};t.prototype={drawArc:function(t){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.r,0,2*Math.PI,!0),this.ctx.fillStyle=t.color,this.ctx.fill(),this.ctx.closePath()}},void 0===window.myOthello&&(window.myOthello={}),window.myOthello.Stone=t}(),document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("canvas");if(!t.getContext)return;const o=document.getElementById("wrapper"),n=t.getContext("2d");n.canvas.width=o.clientWidth,n.canvas.height=o.clientHeight;let i="#ffffff",e=1;const s=new myOthello.BoardManager(n);s.startGame(),t.addEventListener("click",function(t){i=(e*=-1)>0?"#ffffff":"#000000",s.putStone(t.offsetX,t.offsetY,i)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJvYXJkTWFuYWdlci5qcyIsIlBsYXllci5qcyIsIlN0b25lLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIkJvYXJkTWFuYWdlciIsImN0eCIsInRoaXMiLCJHUklEX1NJWkUiLCJMSU5FX05VTUJFUiIsIlIiLCJzdG9uZVBvc2VzIiwiaW5pdCIsInByb3RvdHlwZSIsInRyYW5zbGF0ZSIsImRyYXdCb2FyZCIsInNlbGYiLCJmaWVsZFNpemUiLCJ4IiwieSIsImRyYXdSZWN0IiwiaSIsImRyYXdMaW5lIiwieDEiLCJ5MSIsIngyIiwieTIiLCJjb2xvciIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZSIsInN0YXJ0R2FtZSIsImNlbnRlciIsImRpZmYiLCJwb3NYIiwicG9zWSIsImRpcjEiLCJkaXIyIiwiZGF0YSIsInIiLCJzZXRGaXJzdFN0b25lIiwic3RvbmUiLCJ3aW5kb3ciLCJteU90aGVsbG8iLCJTdG9uZSIsImRyYXdBcmMiLCJwdXNoIiwiaW5zdGFuY2UiLCJwb3MiLCJNYXRoIiwiZmxvb3IiLCJnZXRQb3NPbkJvYXJkIiwiY2xpY2tlZFgiLCJjbGlja2VkWSIsInB1dFN0b25lIiwibnRoR3JpZFgiLCJudGhHcmlkWSIsImNoZWNrVmFjYW5jeSIsImZpbHRlciIsInZhbCIsImxlbmd0aCIsIlBsYXllciIsImNhbnZhcyIsInN0b25lcyIsInNldEV2ZW50IiwiZ2V0Q2xpY2tQb3MiLCJhcmMiLCJQSSIsImZpbGwiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJ3cmFwcGVyIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJpc1doaXRlIiwiYm9hcmQiLCJlIiwib2Zmc2V0WCIsIm9mZnNldFkiXSwibWFwcGluZ3Mi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RCxPQUFBQyxjQUVBRCxPQUFBQyxVQUFBQyxNQUFBQSxFQTNCQSxHQ0VBeUIsU0FBQUMsaUJBQUEsbUJBQUEsV0FFQSxNQUFBUixFQUFBTyxTQUFBRSxlQUFBLFVBRUEsSUFBQVQsRUFBQVUsV0FDQSxPQUdBLE1BQUFDLEVBQUFKLFNBQUFFLGVBQUEsV0FDQXhFLEVBQUErRCxFQUFBVSxXQUFBLE1BQ0F6RSxFQUFBK0QsT0FBQXZDLE1BQUFrRCxFQUFBQyxZQUNBM0UsRUFBQStELE9BQUFhLE9BQUFGLEVBQUFHLGFBRUEsSUFBQXhELEVBQUEsVUFDQXlELEVBQUEsRUFpQkEsTUFBQUMsRUFBQSxJQUFBbkMsVUFBQTdDLGFBQUFDLEdBTUErRSxFQUFBL0MsWUFFQStCLEVBQUFRLGlCQUFBLFFBQUEsU0FBQVMsR0FHQTNELEdBREF5RCxJQUFBLEdBQ0EsRUFBQSxVQUFBLFVBR0FDLEVBQUF4QixTQUFBeUIsRUFBQUMsUUFBQUQsRUFBQUUsUUFBQTdEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBCb2FyZE1hbmFnZXIgPSBmdW5jdGlvbihjdHgpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5jdHggPSBjdHg7XG5cbiAgICAgICAgc2VsZi5HUklEX1NJWkUgPSA1MDtcbiAgICAgICAgc2VsZi5MSU5FX05VTUJFUiA9IDk7XG4gICAgICAgIHNlbGYuUiA9IHNlbGYuR1JJRF9TSVpFICogMC4zO1xuXG4gICAgICAgIHNlbGYuc3RvbmVQb3NlcyA9IFtdO1xuXG4gICAgICAgIHNlbGYuaW5pdCgpO1xuICAgIH07XG5cbiAgICBCb2FyZE1hbmFnZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy8geD0wLCB5PTDjgaflhYjjga7lpKrjgZXjgYzljYrliIbjgZfmj4/lhpnjgZXjgozjgarjgYTjgZ/jgoHjgIHln7rmupbngrnjgpLjgZrjgonjgZlcbiAgICAgICAgICAgIHNlbGYuY3R4LnRyYW5zbGF0ZSgxLCAxKTtcblxuICAgICAgICAgICAgc2VsZi5kcmF3Qm9hcmQoKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGRyYXdCb2FyZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgY29uc3QgZmllbGRTaXplID0gc2VsZi5HUklEX1NJWkUgKiAoc2VsZi5MSU5FX05VTUJFUiAtIDEpO1xuXG4gICAgICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgICAgICBsZXQgeSA9IDA7XG5cbiAgICAgICAgICAgIHNlbGYuZHJhd1JlY3QoeCwgeSwgZmllbGRTaXplLCBmaWVsZFNpemUsICcjMDA4ODMzJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlbGYuTElORV9OVU1CRVI7IGkrKykge1xuICAgICAgICAgICAgICAgIHNlbGYuZHJhd0xpbmUoeCwgMCwgeCwgZmllbGRTaXplKTtcbiAgICAgICAgICAgICAgICB4ICs9IHNlbGYuR1JJRF9TSVpFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc2VsZi5MSU5FX05VTUJFUjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5kcmF3TGluZSgwLCB5LCBmaWVsZFNpemUsIHkpO1xuICAgICAgICAgICAgICAgIHkgKz0gc2VsZi5HUklEX1NJWkU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICBkcmF3UmVjdDogZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIGNvbG9yKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgc2VsZi5jdHguZmlsbFN0eWxlID0gdHlwZW9mIGNvbG9yICE9PSAndW5kZWZpbmVkJyA/IGNvbG9yIDogJyMwMDAwMDAnO1xuICAgICAgICAgICAgc2VsZi5jdHguZmlsbFJlY3QoeDEsIHkxLCB4MiwgeTIpO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhd0xpbmU6IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyLCBjb2xvciwgd2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5zdHJva2VTdHlsZSA9IHR5cGVvZiBjb2xvciAhPT0gJ3VuZGVmaW5lZCcgPyBjb2xvciA6ICcjMDAwMDAwJztcbiAgICAgICAgICAgIHNlbGYuY3R4LmxpbmVXaWR0aCA9IHR5cGVvZiB3aWR0aCAhPT0gJ3VuZGVmaW5lZCcgPyB3aWR0aCA6IDE7XG5cbiAgICAgICAgICAgIHNlbGYuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgc2VsZi5jdHgubW92ZVRvKHgxLCB5MSk7XG4gICAgICAgICAgICBzZWxmLmN0eC5saW5lVG8oeDIsIHkyKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmNsb3NlUGF0aCgpO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5zdHJva2UoKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHN0YXJ0R2FtZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gc2VsZi5HUklEX1NJWkUgKiAoKHNlbGYuTElORV9OVU1CRVIgLSAxKSAvIDIpO1xuICAgICAgICAgICAgY29uc3QgZGlmZiA9IChzZWxmLkdSSURfU0laRSAvIDIpO1xuICAgICAgICAgICAgbGV0IGRpcjEgPSAtMTtcbiAgICAgICAgICAgIGxldCBkaXIyID0gLTE7XG4gICAgICAgICAgICBsZXQgcG9zWCwgcG9zWTtcbiAgICAgICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIHI6IHNlbGYuUlxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0Rmlyc3RTdG9uZSgnI2ZmZmZmZicpO1xuICAgICAgICAgICAgZGlyMSAqPSAtMTtcbiAgICAgICAgICAgIHNldEZpcnN0U3RvbmUoJyMwMDAwMDAnKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0Rmlyc3RTdG9uZShjb2xvcikge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSBjZW50ZXIgKyBkaXIxICogZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9IGNlbnRlciArIGRpcjIgKiBkaWZmO1xuXG4gICAgICAgICAgICAgICAgICAgIGRhdGEueCA9IHBvc1g7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEueSA9IHBvc1k7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuY29sb3IgPSBjb2xvcjtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RvbmUgPSBuZXcgd2luZG93Lm15T3RoZWxsby5TdG9uZShzZWxmLmN0eCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHN0b25lLmRyYXdBcmMoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdG9uZVBvc2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6IHN0b25lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zOiBbTWF0aC5mbG9vcihwb3NYIC8gc2VsZi5HUklEX1NJWkUpLCBNYXRoLmZsb29yKHBvc1kgLyBzZWxmLkdSSURfU0laRSldXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGRpcjEgKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGRpcjIgKj0gLTE7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICBnZXRQb3NPbkJvYXJkOiBmdW5jdGlvbihjbGlja2VkWCwgY2xpY2tlZFkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gW01hdGguZmxvb3IoY2xpY2tlZFggLyBzZWxmLkdSSURfU0laRSksIE1hdGguZmxvb3IoY2xpY2tlZFkgLyBzZWxmLkdSSURfU0laRSldO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgcHV0U3RvbmU6IGZ1bmN0aW9uKGNsaWNrZWRYLCBjbGlja2VkWSwgY29sb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBsZXQgbnRoR3JpZFggPSBNYXRoLmZsb29yKGNsaWNrZWRYIC8gc2VsZi5HUklEX1NJWkUpO1xuICAgICAgICAgICAgbGV0IG50aEdyaWRZID0gTWF0aC5mbG9vcihjbGlja2VkWSAvIHNlbGYuR1JJRF9TSVpFKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYuY2hlY2tWYWNhbmN5KFtudGhHcmlkWCwgbnRoR3JpZFldKSA+IDApIHtcbiAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgeDogKHNlbGYuR1JJRF9TSVpFICogbnRoR3JpZFgpICsgKHNlbGYuR1JJRF9TSVpFIC8gMiksXG4gICAgICAgICAgICAgICAgeTogKHNlbGYuR1JJRF9TSVpFICogbnRoR3JpZFkpICsgKHNlbGYuR1JJRF9TSVpFIC8gMiksXG4gICAgICAgICAgICAgICAgcjogc2VsZi5SLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvclxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IHN0b25lID0gbmV3IHdpbmRvdy5teU90aGVsbG8uU3RvbmUoc2VsZi5jdHgsIGRhdGEpO1xuICAgICAgICAgICAgc3RvbmUuZHJhd0FyYyhkYXRhKTtcblxuICAgICAgICAgICAgc2VsZi5zdG9uZVBvc2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBzdG9uZSxcbiAgICAgICAgICAgICAgICBwb3M6IFtudGhHcmlkWCwgbnRoR3JpZFldXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGNoZWNrVmFjYW5jeTogZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHNlbGYuc3RvbmVQb3Nlcy5maWx0ZXIoZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbC5wb3NbMF0gPT09IHBvc1swXSAmJiB2YWwucG9zWzFdID09PSBwb3NbMV07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGg7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIGlmICh0eXBlb2Ygd2luZG93Lm15T3RoZWxsbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93Lm15T3RoZWxsbyA9IHt9O1xuICAgIH1cbiAgICB3aW5kb3cubXlPdGhlbGxvLkJvYXJkTWFuYWdlciA9IEJvYXJkTWFuYWdlcjtcblxufSgpKTsiLCI7KGZ1bmN0aW9uKCkge1xuXG4gICAgY29uc3QgUGxheWVyID0gZnVuY3Rpb24oY2FudmFzLCBkYXRhKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuY2FudmFzID0gY2FudmFzO1xuXG4gICAgICAgIHNlbGYuY29sb3IgPSBkYXRhLmNvbG9yO1xuICAgICAgICBzZWxmLnN0b25lcyA9IFtdO1xuXG4gICAgICAgIHNlbGYuaW5pdCgpO1xuICAgIH07XG5cbiAgICBQbGF5ZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHNlbGYuc2V0RXZlbnQoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRFdmVudDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy8gc2VsZi5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZS5vZmZzZXRYKTtcbiAgICAgICAgICAgIC8vIH0pO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q2xpY2tQb3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uUGxheWVyID0gUGxheWVyO1xuXG59KCkpOyIsIjsoZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBTdG9uZSA9IGZ1bmN0aW9uKGN0eCwgZGF0YSkge1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmN0eCA9IGN0eDtcbiAgICAgICAgc2VsZi5jb2xvciA9IGRhdGEuY29sb3I7XG5cbiAgICB9O1xuXG4gICAgU3RvbmUucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGRyYXdBcmM6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHNlbGYuY3R4LmFyYyhkYXRhLngsIGRhdGEueSwgZGF0YS5yLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgICAgICAgICBzZWxmLmN0eC5maWxsU3R5bGUgPSBkYXRhLmNvbG9yO1xuICAgICAgICAgICAgc2VsZi5jdHguZmlsbCgpO1xuICAgICAgICAgICAgc2VsZi5jdHguY2xvc2VQYXRoKCk7XG5cbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cubXlPdGhlbGxvID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3cubXlPdGhlbGxvID0ge307XG4gICAgfVxuICAgIHdpbmRvdy5teU90aGVsbG8uU3RvbmUgPSBTdG9uZTtcblxufSgpKTsiLCI7KGZ1bmN0aW9uKCkge1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcblxuICAgICAgICBpZiAoIWNhbnZhcy5nZXRDb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKTtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5jYW52YXMud2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IHdyYXBwZXIuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIGxldCBjb2xvciA9ICcjZmZmZmZmJztcbiAgICAgICAgbGV0IGlzV2hpdGUgPSAxO1xuXG4gICAgICAgIGxldCBwbGF5ZXJEYXRhID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBudWxsLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdibGFjaydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgYm9hcmQgPSBuZXcgbXlPdGhlbGxvLkJvYXJkTWFuYWdlcihjdHgpO1xuXG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBwbGF5ZXJEYXRhLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vICAgICBwbGF5ZXJEYXRhW2ldLmluc3RhbmNlID0gIG5ldyBteU90aGVsbG8uUGxheWVyKGNhbnZhcywgcGxheWVyRGF0YVtpXS5kYXRhKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGJvYXJkLnN0YXJ0R2FtZSgpO1xuXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgaXNXaGl0ZSAqPSAtMTtcbiAgICAgICAgICAgIGNvbG9yID0gaXNXaGl0ZSA+IDAgPyAnI2ZmZmZmZicgOiAnIzAwMDAwMCc7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGJvYXJkLmdldFBvc09uQm9hcmQoZS5vZmZzZXRYLCBlLm9mZnNldFkpKTtcbiAgICAgICAgICAgIGJvYXJkLnB1dFN0b25lKGUub2Zmc2V0WCwgZS5vZmZzZXRZLCBjb2xvcik7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8g44OV44Kj44O844Or44OJ44KS5pu444GP77yIOHg477yJXG4gICAgICAgIC8vIOWQhOODnuOCueebruOBruOCqOODquOCouaDheWgseOCkuS/neaMge+8iHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZ77yJXG4gICAgICAgIC8vICAgICAg44Kv44Oq44OD44Kv44GX44Gf5L2N572u44GoY2FudmFz5LiK44Gu5L2N572u44Gu5aSJ5o+b44GM5b+F6KaB77yfXG4gICAgICAgIC8vIOODl+ODrOOCpOODpOODvOeZveODu+m7kuOCkuOCu+ODg+ODiFxuICAgICAgICAvLyAgICAgIOODleODqeOCsOOBq+OBmeOCi++8n1xuICAgICAgICAvLyDkuK3lpK7jgavnmb3pu5Iy44GT44Ga44Gk44K744OD44OIXG5cbiAgICAgICAgLy8g5ZCE44OX44Os44Kk44Ok44O844Gu572u44GE44Gf55+z44KS5L+d5oyB44GZ44KL6YWN5YiXXG4gICAgICAgIC8vXG5cblxuXG4gICAgfSk7XG5cbn0oKSk7XG5cbi8qKlxuICogLy8gVE9ETyDos6rllY9cbiAqXG4gKiAxLlxuIOOAjOWIpOWumuOBmeOCi+OAjeOBqOOBhOOBhuiLseiqnuOBr+S9leOCkuS9v+OBo+OBpuOBvuOBmeOBi++8n1xuXG4gZmluZD8ganVkZ2U/IGRlY2lkZT9cblxuXG4gMi5cbiBjaHJvbWXjga5kZXbjg4Tjg7zjg6vjgafjgqTjg7Pjgrnjgr/jg7PjgrnjgavlhaXjgaPjgabjgYTjgot044Go44Gv44Gq44KT44Gu5oSP5ZGz44CB55Wl77yI77yf77yJ44Gn44GZ44GL77yf44Kk44Oz44K544K/44Oz44K544KS44Ot44Kw44Gr5Ye644GZ44GodOOBqOOBquOCi++8n1xuIGJvYXJkLnN0YXJ0R2FtZeOBruacgOW+jOOBp2NvbnNvbGUubG9nKHNlbGYuc3RvbmVQb3Nlcyk744GZ44KL44Go56K66KqN44Gn44GN44KLXG5cbiAqL1xuIl19